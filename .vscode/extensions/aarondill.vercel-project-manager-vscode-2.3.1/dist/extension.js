/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e,t={1194:(e,t,r)=>{"use strict";t.KT=void 0;const o=r(8611),n=r(5692),i=r(6928),s=r(4434);t.KT=async function(e,...t){e.listen(...t,(()=>{})),await(0,s.once)(e,"listening");const r=e.address();if(!r)throw new Error("Server not listening");let a,l=(e=>"string"==typeof e.protocol?e.protocol:e instanceof o.Server?"http":e instanceof n.Server?"https":void 0)(e);if("string"==typeof r)a=encodeURIComponent((0,i.resolve)(r)),l?l+="+unix":l="unix";else{const{address:e,port:t,family:o}=r;a="IPv6"===o?`[${e}]`:e,a+=`:${t}`,l||(l="tcp")}return new URL(`${l}://${a}`)}},8075:(e,t,r)=>{"use strict";var o=r(453),n=r(487),i=n(o("String.prototype.indexOf"));e.exports=function(e,t){var r=o(e,!!t);return"function"==typeof r&&i(e,".prototype.")>-1?n(r):r}},487:(e,t,r)=>{"use strict";var o=r(6743),n=r(453),i=r(6897),s=r(9675),a=n("%Function.prototype.apply%"),l=n("%Function.prototype.call%"),c=n("%Reflect.apply%",!0)||o.call(l,a),u=r(655),d=n("%Math.max%");e.exports=function(e){if("function"!=typeof e)throw new s("a function is required");var t=c(o,l,arguments);return i(t,1+d(0,e.length-(arguments.length-1)),!0)};var f=function(){return c(o,a,arguments)};u?u(e.exports,"apply",{value:f}):e.exports.apply=f},41:(e,t,r)=>{"use strict";var o=r(655),n=r(8068),i=r(9675),s=r(5795);e.exports=function(e,t,r){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new i("`obj` must be an object or a function`");if("string"!=typeof t&&"symbol"!=typeof t)throw new i("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new i("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new i("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new i("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new i("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,l=arguments.length>4?arguments[4]:null,c=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],d=!!s&&s(e,t);if(o)o(e,t,{configurable:null===c&&d?d.configurable:!c,enumerable:null===a&&d?d.enumerable:!a,value:r,writable:null===l&&d?d.writable:!l});else{if(!u&&(a||l||c))throw new n("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");e[t]=r}}},655:(e,t,r)=>{"use strict";var o=r(453)("%Object.defineProperty%",!0)||!1;if(o)try{o({},"a",{value:1})}catch(e){o=!1}e.exports=o},1237:e=>{"use strict";e.exports=EvalError},9383:e=>{"use strict";e.exports=Error},9290:e=>{"use strict";e.exports=RangeError},9538:e=>{"use strict";e.exports=ReferenceError},8068:e=>{"use strict";e.exports=SyntaxError},9675:e=>{"use strict";e.exports=TypeError},5345:e=>{"use strict";e.exports=URIError},9353:e=>{"use strict";var t=Object.prototype.toString,r=Math.max,o=function(e,t){for(var r=[],o=0;o<e.length;o+=1)r[o]=e[o];for(var n=0;n<t.length;n+=1)r[n+e.length]=t[n];return r};e.exports=function(e){var n=this;if("function"!=typeof n||"[object Function]"!==t.apply(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var i,s=function(e){for(var t=[],r=1,o=0;r<e.length;r+=1,o+=1)t[o]=e[r];return t}(arguments),a=r(0,n.length-s.length),l=[],c=0;c<a;c++)l[c]="$"+c;if(i=Function("binder","return function ("+function(e){for(var t="",r=0;r<e.length;r+=1)t+=e[r],r+1<e.length&&(t+=",");return t}(l)+"){ return binder.apply(this,arguments); }")((function(){if(this instanceof i){var t=n.apply(this,o(s,arguments));return Object(t)===t?t:this}return n.apply(e,o(s,arguments))})),n.prototype){var u=function(){};u.prototype=n.prototype,i.prototype=new u,u.prototype=null}return i}},6743:(e,t,r)=>{"use strict";var o=r(9353);e.exports=Function.prototype.bind||o},453:(e,t,r)=>{"use strict";var o,n=r(9383),i=r(1237),s=r(9290),a=r(9538),l=r(8068),c=r(9675),u=r(5345),d=Function,f=function(e){try{return d('"use strict"; return ('+e+").constructor;")()}catch(e){}},p=Object.getOwnPropertyDescriptor;if(p)try{p({},"")}catch(e){p=null}var h=function(){throw new c},y=p?function(){try{return h}catch(e){try{return p(arguments,"callee").get}catch(e){return h}}}():h,m=r(4039)(),b=r(24)(),g=Object.getPrototypeOf||(b?function(e){return e.__proto__}:null),v={},w="undefined"!=typeof Uint8Array&&g?g(Uint8Array):o,_={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?o:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?o:ArrayBuffer,"%ArrayIteratorPrototype%":m&&g?g([][Symbol.iterator]()):o,"%AsyncFromSyncIteratorPrototype%":o,"%AsyncFunction%":v,"%AsyncGenerator%":v,"%AsyncGeneratorFunction%":v,"%AsyncIteratorPrototype%":v,"%Atomics%":"undefined"==typeof Atomics?o:Atomics,"%BigInt%":"undefined"==typeof BigInt?o:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?o:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?o:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?o:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":n,"%eval%":eval,"%EvalError%":i,"%Float32Array%":"undefined"==typeof Float32Array?o:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?o:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?o:FinalizationRegistry,"%Function%":d,"%GeneratorFunction%":v,"%Int8Array%":"undefined"==typeof Int8Array?o:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?o:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?o:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":m&&g?g(g([][Symbol.iterator]())):o,"%JSON%":"object"==typeof JSON?JSON:o,"%Map%":"undefined"==typeof Map?o:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&m&&g?g((new Map)[Symbol.iterator]()):o,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?o:Promise,"%Proxy%":"undefined"==typeof Proxy?o:Proxy,"%RangeError%":s,"%ReferenceError%":a,"%Reflect%":"undefined"==typeof Reflect?o:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?o:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&m&&g?g((new Set)[Symbol.iterator]()):o,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?o:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":m&&g?g(""[Symbol.iterator]()):o,"%Symbol%":m?Symbol:o,"%SyntaxError%":l,"%ThrowTypeError%":y,"%TypedArray%":w,"%TypeError%":c,"%Uint8Array%":"undefined"==typeof Uint8Array?o:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?o:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?o:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?o:Uint32Array,"%URIError%":u,"%WeakMap%":"undefined"==typeof WeakMap?o:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?o:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?o:WeakSet};if(g)try{null.error}catch(e){var S=g(g(e));_["%Error.prototype%"]=S}var E=function e(t){var r;if("%AsyncFunction%"===t)r=f("async function () {}");else if("%GeneratorFunction%"===t)r=f("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=f("async function* () {}");else if("%AsyncGenerator%"===t){var o=e("%AsyncGeneratorFunction%");o&&(r=o.prototype)}else if("%AsyncIteratorPrototype%"===t){var n=e("%AsyncGenerator%");n&&g&&(r=g(n.prototype))}return _[t]=r,r},P={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},T=r(6743),j=r(9957),R=T.call(Function.call,Array.prototype.concat),A=T.call(Function.apply,Array.prototype.splice),O=T.call(Function.call,String.prototype.replace),k=T.call(Function.call,String.prototype.slice),C=T.call(Function.call,RegExp.prototype.exec),I=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,x=/\\(\\)?/g,q=function(e,t){var r,o=e;if(j(P,o)&&(o="%"+(r=P[o])[0]+"%"),j(_,o)){var n=_[o];if(n===v&&(n=E(o)),void 0===n&&!t)throw new c("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:o,value:n}}throw new l("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new c('"allowMissing" argument must be a boolean');if(null===C(/^%?[^%]*%?$/,e))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=k(e,0,1),r=k(e,-1);if("%"===t&&"%"!==r)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new l("invalid intrinsic syntax, expected opening `%`");var o=[];return O(e,I,(function(e,t,r,n){o[o.length]=r?O(n,x,"$1"):t||e})),o}(e),o=r.length>0?r[0]:"",n=q("%"+o+"%",t),i=n.name,s=n.value,a=!1,u=n.alias;u&&(o=u[0],A(r,R([0,1],u)));for(var d=1,f=!0;d<r.length;d+=1){var h=r[d],y=k(h,0,1),m=k(h,-1);if(('"'===y||"'"===y||"`"===y||'"'===m||"'"===m||"`"===m)&&y!==m)throw new l("property names with quotes must have matching quotes");if("constructor"!==h&&f||(a=!0),j(_,i="%"+(o+="."+h)+"%"))s=_[i];else if(null!=s){if(!(h in s)){if(!t)throw new c("base intrinsic for "+e+" exists, but the property is not available.");return}if(p&&d+1>=r.length){var b=p(s,h);s=(f=!!b)&&"get"in b&&!("originalValue"in b.get)?b.get:s[h]}else f=j(s,h),s=s[h];f&&!a&&(_[i]=s)}}return s}},5795:(e,t,r)=>{"use strict";var o=r(453)("%Object.getOwnPropertyDescriptor%",!0);if(o)try{o([],"length")}catch(e){o=null}e.exports=o},592:(e,t,r)=>{"use strict";var o=r(655),n=function(){return!!o};n.hasArrayLengthDefineBug=function(){if(!o)return null;try{return 1!==o([],"length",{value:1}).length}catch(e){return!0}},e.exports=n},24:e=>{"use strict";var t={__proto__:null,foo:{}},r=Object;e.exports=function(){return{__proto__:t}.foo===t.foo&&!(t instanceof r)}},4039:(e,t,r)=>{"use strict";var o="undefined"!=typeof Symbol&&Symbol,n=r(1333);e.exports=function(){return"function"==typeof o&&"function"==typeof Symbol&&"symbol"==typeof o("foo")&&"symbol"==typeof Symbol("bar")&&n()}},1333:e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var o=Object.getOwnPropertySymbols(e);if(1!==o.length||o[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(e,t);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},9957:(e,t,r)=>{"use strict";var o=Function.prototype.call,n=Object.prototype.hasOwnProperty,i=r(6743);e.exports=i.call(o,n)},5157:(e,t,r)=>{if(!globalThis.DOMException)try{const{MessageChannel:e}=r(8167),t=(new e).port1,o=new ArrayBuffer;t.postMessage(o,[o,o])}catch(e){"DOMException"===e.constructor.name&&(globalThis.DOMException=e.constructor)}e.exports=globalThis.DOMException},8859:(e,t,r)=>{var o="function"==typeof Map&&Map.prototype,n=Object.getOwnPropertyDescriptor&&o?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=o&&n&&"function"==typeof n.get?n.get:null,s=o&&Map.prototype.forEach,a="function"==typeof Set&&Set.prototype,l=Object.getOwnPropertyDescriptor&&a?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,c=a&&l&&"function"==typeof l.get?l.get:null,u=a&&Set.prototype.forEach,d="function"==typeof WeakMap&&WeakMap.prototype?WeakMap.prototype.has:null,f="function"==typeof WeakSet&&WeakSet.prototype?WeakSet.prototype.has:null,p="function"==typeof WeakRef&&WeakRef.prototype?WeakRef.prototype.deref:null,h=Boolean.prototype.valueOf,y=Object.prototype.toString,m=Function.prototype.toString,b=String.prototype.match,g=String.prototype.slice,v=String.prototype.replace,w=String.prototype.toUpperCase,_=String.prototype.toLowerCase,S=RegExp.prototype.test,E=Array.prototype.concat,P=Array.prototype.join,T=Array.prototype.slice,j=Math.floor,R="function"==typeof BigInt?BigInt.prototype.valueOf:null,A=Object.getOwnPropertySymbols,O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol.prototype.toString:null,k="function"==typeof Symbol&&"object"==typeof Symbol.iterator,C="function"==typeof Symbol&&Symbol.toStringTag&&(Symbol.toStringTag,1)?Symbol.toStringTag:null,I=Object.prototype.propertyIsEnumerable,x=("function"==typeof Reflect?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function q(e,t){if(e===1/0||e===-1/0||e!=e||e&&e>-1e3&&e<1e3||S.call(/e/,t))return t;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if("number"==typeof e){var o=e<0?-j(-e):j(e);if(o!==e){var n=String(o),i=g.call(t,n.length+1);return v.call(n,r,"$&_")+"."+v.call(v.call(i,/([0-9]{3})/g,"$&_"),/_$/,"")}}return v.call(t,r,"$&_")}var L=r(8093),D=L.custom,$=U(D)?D:null;function M(e,t,r){var o="double"===(r.quoteStyle||t)?'"':"'";return o+e+o}function B(e){return v.call(String(e),/"/g,"&quot;")}function W(e){return!("[object Array]"!==V(e)||C&&"object"==typeof e&&C in e)}function F(e){return!("[object RegExp]"!==V(e)||C&&"object"==typeof e&&C in e)}function U(e){if(k)return e&&"object"==typeof e&&e instanceof Symbol;if("symbol"==typeof e)return!0;if(!e||"object"!=typeof e||!O)return!1;try{return O.call(e),!0}catch(e){}return!1}e.exports=function e(t,r,o,n){var a=r||{};if(N(a,"quoteStyle")&&"single"!==a.quoteStyle&&"double"!==a.quoteStyle)throw new TypeError('option "quoteStyle" must be "single" or "double"');if(N(a,"maxStringLength")&&("number"==typeof a.maxStringLength?a.maxStringLength<0&&a.maxStringLength!==1/0:null!==a.maxStringLength))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var l=!N(a,"customInspect")||a.customInspect;if("boolean"!=typeof l&&"symbol"!==l)throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(N(a,"indent")&&null!==a.indent&&"\t"!==a.indent&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(N(a,"numericSeparator")&&"boolean"!=typeof a.numericSeparator)throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var y=a.numericSeparator;if(void 0===t)return"undefined";if(null===t)return"null";if("boolean"==typeof t)return t?"true":"false";if("string"==typeof t)return K(t,a);if("number"==typeof t){if(0===t)return 1/0/t>0?"0":"-0";var w=String(t);return y?q(t,w):w}if("bigint"==typeof t){var S=String(t)+"n";return y?q(t,S):S}var j=void 0===a.depth?5:a.depth;if(void 0===o&&(o=0),o>=j&&j>0&&"object"==typeof t)return W(t)?"[Array]":"[Object]";var A,D=function(e,t){var r;if("\t"===e.indent)r="\t";else{if(!("number"==typeof e.indent&&e.indent>0))return null;r=P.call(Array(e.indent+1)," ")}return{base:r,prev:P.call(Array(t+1),r)}}(a,o);if(void 0===n)n=[];else if(H(n,t)>=0)return"[Circular]";function z(t,r,i){if(r&&(n=T.call(n)).push(r),i){var s={depth:a.depth};return N(a,"quoteStyle")&&(s.quoteStyle=a.quoteStyle),e(t,s,o+1,n)}return e(t,a,o+1,n)}if("function"==typeof t&&!F(t)){var G=function(e){if(e.name)return e.name;var t=b.call(m.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}(t),ee=X(t,z);return"[Function"+(G?": "+G:" (anonymous)")+"]"+(ee.length>0?" { "+P.call(ee,", ")+" }":"")}if(U(t)){var te=k?v.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):O.call(t);return"object"!=typeof t||k?te:Q(te)}if((A=t)&&"object"==typeof A&&("undefined"!=typeof HTMLElement&&A instanceof HTMLElement||"string"==typeof A.nodeName&&"function"==typeof A.getAttribute)){for(var re="<"+_.call(String(t.nodeName)),oe=t.attributes||[],ne=0;ne<oe.length;ne++)re+=" "+oe[ne].name+"="+M(B(oe[ne].value),"double",a);return re+=">",t.childNodes&&t.childNodes.length&&(re+="..."),re+"</"+_.call(String(t.nodeName))+">"}if(W(t)){if(0===t.length)return"[]";var ie=X(t,z);return D&&!function(e){for(var t=0;t<e.length;t++)if(H(e[t],"\n")>=0)return!1;return!0}(ie)?"["+Z(ie,D)+"]":"[ "+P.call(ie,", ")+" ]"}if(function(e){return!("[object Error]"!==V(e)||C&&"object"==typeof e&&C in e)}(t)){var se=X(t,z);return"cause"in Error.prototype||!("cause"in t)||I.call(t,"cause")?0===se.length?"["+String(t)+"]":"{ ["+String(t)+"] "+P.call(se,", ")+" }":"{ ["+String(t)+"] "+P.call(E.call("[cause]: "+z(t.cause),se),", ")+" }"}if("object"==typeof t&&l){if($&&"function"==typeof t[$]&&L)return L(t,{depth:j-o});if("symbol"!==l&&"function"==typeof t.inspect)return t.inspect()}if(function(e){if(!i||!e||"object"!=typeof e)return!1;try{i.call(e);try{c.call(e)}catch(e){return!0}return e instanceof Map}catch(e){}return!1}(t)){var ae=[];return s&&s.call(t,(function(e,r){ae.push(z(r,t,!0)+" => "+z(e,t))})),J("Map",i.call(t),ae,D)}if(function(e){if(!c||!e||"object"!=typeof e)return!1;try{c.call(e);try{i.call(e)}catch(e){return!0}return e instanceof Set}catch(e){}return!1}(t)){var le=[];return u&&u.call(t,(function(e){le.push(z(e,t))})),J("Set",c.call(t),le,D)}if(function(e){if(!d||!e||"object"!=typeof e)return!1;try{d.call(e,d);try{f.call(e,f)}catch(e){return!0}return e instanceof WeakMap}catch(e){}return!1}(t))return Y("WeakMap");if(function(e){if(!f||!e||"object"!=typeof e)return!1;try{f.call(e,f);try{d.call(e,d)}catch(e){return!0}return e instanceof WeakSet}catch(e){}return!1}(t))return Y("WeakSet");if(function(e){if(!p||!e||"object"!=typeof e)return!1;try{return p.call(e),!0}catch(e){}return!1}(t))return Y("WeakRef");if(function(e){return!("[object Number]"!==V(e)||C&&"object"==typeof e&&C in e)}(t))return Q(z(Number(t)));if(function(e){if(!e||"object"!=typeof e||!R)return!1;try{return R.call(e),!0}catch(e){}return!1}(t))return Q(z(R.call(t)));if(function(e){return!("[object Boolean]"!==V(e)||C&&"object"==typeof e&&C in e)}(t))return Q(h.call(t));if(function(e){return!("[object String]"!==V(e)||C&&"object"==typeof e&&C in e)}(t))return Q(z(String(t)));if("undefined"!=typeof window&&t===window)return"{ [object Window] }";if("undefined"!=typeof globalThis&&t===globalThis||"undefined"!=typeof global&&t===global)return"{ [object globalThis] }";if(!function(e){return!("[object Date]"!==V(e)||C&&"object"==typeof e&&C in e)}(t)&&!F(t)){var ce=X(t,z),ue=x?x(t)===Object.prototype:t instanceof Object||t.constructor===Object,de=t instanceof Object?"":"null prototype",fe=!ue&&C&&Object(t)===t&&C in t?g.call(V(t),8,-1):de?"Object":"",pe=(ue||"function"!=typeof t.constructor?"":t.constructor.name?t.constructor.name+" ":"")+(fe||de?"["+P.call(E.call([],fe||[],de||[]),": ")+"] ":"");return 0===ce.length?pe+"{}":D?pe+"{"+Z(ce,D)+"}":pe+"{ "+P.call(ce,", ")+" }"}return String(t)};var z=Object.prototype.hasOwnProperty||function(e){return e in this};function N(e,t){return z.call(e,t)}function V(e){return y.call(e)}function H(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0,o=e.length;r<o;r++)if(e[r]===t)return r;return-1}function K(e,t){if(e.length>t.maxStringLength){var r=e.length-t.maxStringLength,o="... "+r+" more character"+(r>1?"s":"");return K(g.call(e,0,t.maxStringLength),t)+o}return M(v.call(v.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,G),"single",t)}function G(e){var t=e.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return r?"\\"+r:"\\x"+(t<16?"0":"")+w.call(t.toString(16))}function Q(e){return"Object("+e+")"}function Y(e){return e+" { ? }"}function J(e,t,r,o){return e+" ("+t+") {"+(o?Z(r,o):P.call(r,", "))+"}"}function Z(e,t){if(0===e.length)return"";var r="\n"+t.prev+t.base;return r+P.call(e,","+r)+"\n"+t.prev}function X(e,t){var r=W(e),o=[];if(r){o.length=e.length;for(var n=0;n<e.length;n++)o[n]=N(e,n)?t(e[n],e):""}var i,s="function"==typeof A?A(e):[];if(k){i={};for(var a=0;a<s.length;a++)i["$"+s[a]]=s[a]}for(var l in e)N(e,l)&&(r&&String(Number(l))===l&&l<e.length||k&&i["$"+l]instanceof Symbol||(S.call(/[^\w$]/,l)?o.push(t(l,e)+": "+t(e[l],e)):o.push(l+": "+t(e[l],e))));if("function"==typeof A)for(var c=0;c<s.length;c++)I.call(e,s[c])&&o.push("["+t(s[c])+"]: "+t(e[s[c]],e));return o}},8093:(e,t,r)=>{e.exports=r(9023).inspect},4765:e=>{"use strict";var t=String.prototype.replace,r=/%20/g,o="RFC3986";e.exports={default:o,formatters:{RFC1738:function(e){return t.call(e,r,"+")},RFC3986:function(e){return String(e)}},RFC1738:"RFC1738",RFC3986:o}},5373:(e,t,r)=>{"use strict";var o=r(8636),n=r(2642),i=r(4765);e.exports={formats:i,parse:n,stringify:o}},2642:(e,t,r)=>{"use strict";var o=r(7720),n=Object.prototype.hasOwnProperty,i=Array.isArray,s={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:o.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},l=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},c=function(e,t,r,o){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/g,a=r.depth>0&&/(\[[^[\]]*])/.exec(i),c=a?i.slice(0,a.index):i,u=[];if(c){if(!r.plainObjects&&n.call(Object.prototype,c)&&!r.allowPrototypes)return;u.push(c)}for(var d=0;r.depth>0&&null!==(a=s.exec(i))&&d<r.depth;){if(d+=1,!r.plainObjects&&n.call(Object.prototype,a[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+i.slice(a.index)+"]"),function(e,t,r,o){for(var n=o?t:l(t,r),i=e.length-1;i>=0;--i){var s,a=e[i];if("[]"===a&&r.parseArrays)s=r.allowEmptyArrays&&(""===n||r.strictNullHandling&&null===n)?[]:[].concat(n);else{s=r.plainObjects?Object.create(null):{};var c="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=r.decodeDotInKeys?c.replace(/%2E/g,"."):c,d=parseInt(u,10);r.parseArrays||""!==u?!isNaN(d)&&a!==u&&String(d)===u&&d>=0&&r.parseArrays&&d<=r.arrayLimit?(s=[])[d]=n:"__proto__"!==u&&(s[u]=n):s={0:n}}n=s}return n}(u,t,r,o)}};e.exports=function(e,t){var r=function(e){if(!e)return s;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.decodeDotInKeys&&"boolean"!=typeof e.decodeDotInKeys)throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?s.charset:e.charset,r=void 0===e.duplicates?s.duplicates:e.duplicates;if("combine"!==r&&"first"!==r&&"last"!==r)throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:void 0===e.allowDots?!0===e.decodeDotInKeys||s.allowDots:!!e.allowDots,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:s.allowEmptyArrays,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:s.allowPrototypes,allowSparse:"boolean"==typeof e.allowSparse?e.allowSparse:s.allowSparse,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:s.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:s.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:s.comma,decodeDotInKeys:"boolean"==typeof e.decodeDotInKeys?e.decodeDotInKeys:s.decodeDotInKeys,decoder:"function"==typeof e.decoder?e.decoder:s.decoder,delimiter:"string"==typeof e.delimiter||o.isRegExp(e.delimiter)?e.delimiter:s.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:s.depth,duplicates:r,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:s.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:s.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:s.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:s.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var u="string"==typeof e?function(e,t){var r={__proto__:null},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e;c=c.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var u,d=t.parameterLimit===1/0?void 0:t.parameterLimit,f=c.split(t.delimiter,d),p=-1,h=t.charset;if(t.charsetSentinel)for(u=0;u<f.length;++u)0===f[u].indexOf("utf8=")&&("utf8=%E2%9C%93"===f[u]?h="utf-8":"utf8=%26%2310003%3B"===f[u]&&(h="iso-8859-1"),p=u,u=f.length);for(u=0;u<f.length;++u)if(u!==p){var y,m,b=f[u],g=b.indexOf("]="),v=-1===g?b.indexOf("="):g+1;-1===v?(y=t.decoder(b,s.decoder,h,"key"),m=t.strictNullHandling?null:""):(y=t.decoder(b.slice(0,v),s.decoder,h,"key"),m=o.maybeMap(l(b.slice(v+1),t),(function(e){return t.decoder(e,s.decoder,h,"value")}))),m&&t.interpretNumericEntities&&"iso-8859-1"===h&&(m=a(m)),b.indexOf("[]=")>-1&&(m=i(m)?[m]:m);var w=n.call(r,y);w&&"combine"===t.duplicates?r[y]=o.combine(r[y],m):w&&"last"!==t.duplicates||(r[y]=m)}return r}(e,r):e,d=r.plainObjects?Object.create(null):{},f=Object.keys(u),p=0;p<f.length;++p){var h=f[p],y=c(h,u[h],r,"string"==typeof e);d=o.merge(d,y,r)}return!0===r.allowSparse?d:o.compact(d)}},8636:(e,t,r)=>{"use strict";var o=r(920),n=r(7720),i=r(4765),s=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,c=Array.prototype.push,u=function(e,t){c.apply(e,l(t)?t:[t])},d=Date.prototype.toISOString,f=i.default,p={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:n.encode,encodeValuesOnly:!1,format:f,formatter:i.formatters[f],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},h={},y=function e(t,r,i,s,a,c,d,f,y,m,b,g,v,w,_,S,E,P){for(var T,j=t,R=P,A=0,O=!1;void 0!==(R=R.get(h))&&!O;){var k=R.get(t);if(A+=1,void 0!==k){if(k===A)throw new RangeError("Cyclic object value");O=!0}void 0===R.get(h)&&(A=0)}if("function"==typeof m?j=m(r,j):j instanceof Date?j=v(j):"comma"===i&&l(j)&&(j=n.maybeMap(j,(function(e){return e instanceof Date?v(e):e}))),null===j){if(c)return y&&!S?y(r,p.encoder,E,"key",w):r;j=""}if("string"==typeof(T=j)||"number"==typeof T||"boolean"==typeof T||"symbol"==typeof T||"bigint"==typeof T||n.isBuffer(j))return y?[_(S?r:y(r,p.encoder,E,"key",w))+"="+_(y(j,p.encoder,E,"value",w))]:[_(r)+"="+_(String(j))];var C,I=[];if(void 0===j)return I;if("comma"===i&&l(j))S&&y&&(j=n.maybeMap(j,y)),C=[{value:j.length>0?j.join(",")||null:void 0}];else if(l(m))C=m;else{var x=Object.keys(j);C=b?x.sort(b):x}var q=f?r.replace(/\./g,"%2E"):r,L=s&&l(j)&&1===j.length?q+"[]":q;if(a&&l(j)&&0===j.length)return L+"[]";for(var D=0;D<C.length;++D){var $=C[D],M="object"==typeof $&&void 0!==$.value?$.value:j[$];if(!d||null!==M){var B=g&&f?$.replace(/\./g,"%2E"):$,W=l(j)?"function"==typeof i?i(L,B):L:L+(g?"."+B:"["+B+"]");P.set(t,A);var F=o();F.set(h,P),u(I,e(M,W,i,s,a,c,d,f,"comma"===i&&S&&l(j)?null:y,m,b,g,v,w,_,S,E,F))}}return I};e.exports=function(e,t){var r,n=e,c=function(e){if(!e)return p;if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||p.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=i.default;if(void 0!==e.format){if(!s.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var o,n=i.formatters[r],c=p.filter;if(("function"==typeof e.filter||l(e.filter))&&(c=e.filter),o=e.arrayFormat in a?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":p.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u=void 0===e.allowDots?!0===e.encodeDotInKeys||p.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:p.addQueryPrefix,allowDots:u,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:p.allowEmptyArrays,arrayFormat:o,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:p.charsetSentinel,commaRoundTrip:e.commaRoundTrip,delimiter:void 0===e.delimiter?p.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:p.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:p.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:p.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:p.encodeValuesOnly,filter:c,format:r,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:p.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:p.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:p.strictNullHandling}}(t);"function"==typeof c.filter?n=(0,c.filter)("",n):l(c.filter)&&(r=c.filter);var d=[];if("object"!=typeof n||null===n)return"";var f=a[c.arrayFormat],h="comma"===f&&c.commaRoundTrip;r||(r=Object.keys(n)),c.sort&&r.sort(c.sort);for(var m=o(),b=0;b<r.length;++b){var g=r[b];c.skipNulls&&null===n[g]||u(d,y(n[g],g,f,h,c.allowEmptyArrays,c.strictNullHandling,c.skipNulls,c.encodeDotInKeys,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.format,c.formatter,c.encodeValuesOnly,c.charset,m))}var v=d.join(c.delimiter),w=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?w+="utf8=%26%2310003%3B&":w+="utf8=%E2%9C%93&"),v.length>0?w+v:""}},7720:(e,t,r)=>{"use strict";var o=r(4765),n=Object.prototype.hasOwnProperty,i=Array.isArray,s=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},o=0;o<e.length;++o)void 0!==e[o]&&(r[o]=e[o]);return r},l=1024;e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],o=0;o<t.length;++o)for(var n=t[o],s=n.obj[n.prop],a=Object.keys(s),l=0;l<a.length;++l){var c=a[l],u=s[c];"object"==typeof u&&null!==u&&-1===r.indexOf(u)&&(t.push({obj:s,prop:c}),r.push(u))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(i(r)){for(var o=[],n=0;n<r.length;++n)void 0!==r[n]&&o.push(r[n]);t.obj[t.prop]=o}}}(t),e},decode:function(e,t,r){var o=e.replace(/\+/g," ");if("iso-8859-1"===r)return o.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(o)}catch(e){return o}},encode:function(e,t,r,n,i){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var c="",u=0;u<a.length;u+=l){for(var d=a.length>=l?a.slice(u,u+l):a,f=[],p=0;p<d.length;++p){var h=d.charCodeAt(p);45===h||46===h||95===h||126===h||h>=48&&h<=57||h>=65&&h<=90||h>=97&&h<=122||i===o.RFC1738&&(40===h||41===h)?f[f.length]=d.charAt(p):h<128?f[f.length]=s[h]:h<2048?f[f.length]=s[192|h>>6]+s[128|63&h]:h<55296||h>=57344?f[f.length]=s[224|h>>12]+s[128|h>>6&63]+s[128|63&h]:(p+=1,h=65536+((1023&h)<<10|1023&d.charCodeAt(p)),f[f.length]=s[240|h>>18]+s[128|h>>12&63]+s[128|h>>6&63]+s[128|63&h])}c+=f.join("")}return c},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(i(e)){for(var r=[],o=0;o<e.length;o+=1)r.push(t(e[o]));return r}return t(e)},merge:function e(t,r,o){if(!r)return t;if("object"!=typeof r){if(i(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(o&&(o.plainObjects||o.allowPrototypes)||!n.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var s=t;return i(t)&&!i(r)&&(s=a(t,o)),i(t)&&i(r)?(r.forEach((function(r,i){if(n.call(t,i)){var s=t[i];s&&"object"==typeof s&&r&&"object"==typeof r?t[i]=e(s,r,o):t.push(r)}else t[i]=r})),t):Object.keys(r).reduce((function(t,i){var s=r[i];return n.call(t,i)?t[i]=e(t[i],s,o):t[i]=s,t}),s)}}},6897:(e,t,r)=>{"use strict";var o=r(453),n=r(41),i=r(592)(),s=r(5795),a=r(9675),l=o("%Math.floor%");e.exports=function(e,t){if("function"!=typeof e)throw new a("`fn` is not a function");if("number"!=typeof t||t<0||t>4294967295||l(t)!==t)throw new a("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],o=!0,c=!0;if("length"in e&&s){var u=s(e,"length");u&&!u.configurable&&(o=!1),u&&!u.writable&&(c=!1)}return(o||c||!r)&&(i?n(e,"length",t,!0,!0):n(e,"length",t)),e}},920:(e,t,r)=>{"use strict";var o=r(453),n=r(8075),i=r(8859),s=r(9675),a=o("%WeakMap%",!0),l=o("%Map%",!0),c=n("WeakMap.prototype.get",!0),u=n("WeakMap.prototype.set",!0),d=n("WeakMap.prototype.has",!0),f=n("Map.prototype.get",!0),p=n("Map.prototype.set",!0),h=n("Map.prototype.has",!0),y=function(e,t){for(var r,o=e;null!==(r=o.next);o=r)if(r.key===t)return o.next=r.next,r.next=e.next,e.next=r,r};e.exports=function(){var e,t,r,o={assert:function(e){if(!o.has(e))throw new s("Side channel does not contain "+i(e))},get:function(o){if(a&&o&&("object"==typeof o||"function"==typeof o)){if(e)return c(e,o)}else if(l){if(t)return f(t,o)}else if(r)return function(e,t){var r=y(e,t);return r&&r.value}(r,o)},has:function(o){if(a&&o&&("object"==typeof o||"function"==typeof o)){if(e)return d(e,o)}else if(l){if(t)return h(t,o)}else if(r)return function(e,t){return!!y(e,t)}(r,o);return!1},set:function(o,n){a&&o&&("object"==typeof o||"function"==typeof o)?(e||(e=new a),u(e,o,n)):l?(t||(t=new l),p(t,o,n)):(r||(r={key:{},next:null}),function(e,t,r){var o=y(e,t);o?o.value=r:e.next={key:t,next:e.next,value:r}}(r,o,n))}};return o}},5895:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Reflect=void 0,t.Reflect=function(){return null}},9566:function(e,t,r){"use strict";var o,n=this&&this.__extends||(o=function(e,t){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},o(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var o,n,i=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)s.push(o.value)}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return s};Object.defineProperty(t,"__esModule",{value:!0}),t.assert=t.AssertionError=void 0;var s=r(2264),a=r(9983),l=function(e){function t(t){var r=this.constructor,o=e.call(this,"Wrong assertion encountered"+(t?': "'.concat(t,'"'):""))||this;if(Object.setPrototypeOf(o,r.prototype),!o.stack)return o;try{(0,s.overwriteReadonlyProp)(o,"stack",o.stack.split("\n").filter((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=i(e,2)[1];return 1!==r&&2!==r})).join("\n"))}catch(e){}return o}return n(t,e),t}(Error);t.AssertionError=l,t.assert=function(e,t){if(0===arguments.length&&(e=!0),void 0===a.assertIsRefWrapper.ref){if(!e)throw new l(t)}else a.assertIsRefWrapper.ref=void 0}},386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.capitalize=void 0,t.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},4140:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.exclude=void 0,t.exclude=function(e){var t=e instanceof Object?function(t){return e.indexOf(t)<0}:function(t){return t!==e};return function(e){return t(e)}}},5079:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flip=void 0,t.flip=function(e,t){if(void 0!==e[t])return e[t]=!e[t]}},5929:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.id=void 0,t.id=function(e){return e}},1146:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(9566),t),n(r(4140),t),n(r(5079),t),n(r(5929),t),n(r(3244),t),n(r(2923),t),n(r(2543),t),n(r(1420),t),n(r(9454),t),n(r(8207),t),n(r(2263),t),n(r(9587),t),n(r(5895),t),n(r(386),t),n(r(5833),t)},1420:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.is=void 0;var o=r(9983),n=["Wrong usage of the ".concat(i.name," function refer to"),"https://docs.tsafe.dev/".concat(i.name.toLowerCase())].join(" ");function i(e){var t={};if(void 0!==o.assertIsRefWrapper.ref)throw o.assertIsRefWrapper.ref=void 0,new Error(n);return o.assertIsRefWrapper.ref=t,Promise.resolve().then((function(){if(o.assertIsRefWrapper.ref===t)throw new Error(n)})),null}t.is=i},9454:function(e,t){"use strict";var r=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],o=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0}),t.isAmong=void 0,t.isAmong=function(e,t){var o,n;try{for(var i=r(e),s=i.next();!s.done;s=i.next())if(s.value===t)return!0}catch(e){o={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return!1}},3244:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPromiseLike=void 0,t.isPromiseLike=function(e){return"object"==typeof e&&null!==e&&"then"in e&&"function"==typeof e.then}},2264:function(e,t,r){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.overwriteReadonlyProp=void 0;var n=r(9566),i=r(1420);t.overwriteReadonlyProp=function(e,t,r){try{e[t]=r}catch(e){}if(e[t]===r)return r;var s=void 0,a=Object.getOwnPropertyDescriptor(e,t)||{enumerable:!0,configurable:!0};if(a.get)throw new Error("Probably a wrong ides to overwrite ".concat(String(t)," getter"));try{Object.defineProperty(e,t,o(o({},a),{value:r}))}catch(e){(0,n.assert)((0,i.is)(e)),s=e}if(e[t]!==r)throw s||new Error("Can't assign");return r}},9587:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noUndefined=void 0,t.noUndefined=function(e){var t={};for(var r in e)void 0!==e[r]&&(t[r]=e[r]);return t}},8207:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectEntries=void 0,t.objectEntries=function(e){return Object.entries(e)}},2263:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectFromEntries=void 0,t.objectFromEntries=function(e){return Object.fromEntries(e)}},2923:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.objectKeys=void 0,t.objectKeys=function(e){return Object.keys(e)}},2543:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typeGuard=void 0,t.typeGuard=function(e,t){return t}},5833:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uncapitalize=void 0,t.uncapitalize=function(e){return e.charAt(0).toLowerCase()+e.slice(1)}},9983:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertIsRefWrapper=void 0;var o=r(5929);t.assertIsRefWrapper={ref:(0,o.id)(void 0)}},5010:function(e,t){var r;r=function(e){"use strict";function t(){}function r(e){return"object"==typeof e&&null!==e||"function"==typeof e}const o=t;function n(e,t){try{Object.defineProperty(e,"name",{value:t,configurable:!0})}catch(e){}}const i=Promise,s=Promise.prototype.then,a=Promise.reject.bind(i);function l(e){return new i(e)}function c(e){return l((t=>t(e)))}function u(e){return a(e)}function d(e,t,r){return s.call(e,t,r)}function f(e,t,r){d(d(e,t,r),void 0,o)}function p(e,t){f(e,t)}function h(e,t){f(e,void 0,t)}function y(e,t,r){return d(e,t,r)}function m(e){d(e,void 0,o)}let b=e=>{if("function"==typeof queueMicrotask)b=queueMicrotask;else{const e=c(void 0);b=t=>d(e,t)}return b(e)};function g(e,t,r){if("function"!=typeof e)throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,r)}function v(e,t,r){try{return c(g(e,t,r))}catch(e){return u(e)}}class w{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(e){const t=this._back;let r=t;16383===t._elements.length&&(r={_elements:[],_next:void 0}),t._elements.push(e),r!==t&&(this._back=r,t._next=r),++this._size}shift(){const e=this._front;let t=e;const r=this._cursor;let o=r+1;const n=e._elements,i=n[r];return 16384===o&&(t=e._next,o=0),--this._size,this._cursor=o,e!==t&&(this._front=t),n[r]=void 0,i}forEach(e){let t=this._cursor,r=this._front,o=r._elements;for(;!(t===o.length&&void 0===r._next||t===o.length&&(r=r._next,o=r._elements,t=0,0===o.length));)e(o[t]),++t}peek(){const e=this._front,t=this._cursor;return e._elements[t]}}const _=Symbol("[[AbortSteps]]"),S=Symbol("[[ErrorSteps]]"),E=Symbol("[[CancelSteps]]"),P=Symbol("[[PullSteps]]"),T=Symbol("[[ReleaseSteps]]");function j(e,t){e._ownerReadableStream=t,t._reader=e,"readable"===t._state?k(e):"closed"===t._state?function(e){k(e),x(e)}(e):C(e,t._storedError)}function R(e,t){return qr(e._ownerReadableStream,t)}function A(e){const t=e._ownerReadableStream;"readable"===t._state?I(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):function(e){C(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness"))}(e),t._readableStreamController[T](),t._reader=void 0,e._ownerReadableStream=void 0}function O(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function k(e){e._closedPromise=l(((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r}))}function C(e,t){k(e),I(e,t)}function I(e,t){void 0!==e._closedPromise_reject&&(m(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function x(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}const q=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},L=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function D(e,t){if(void 0!==e&&"object"!=typeof(r=e)&&"function"!=typeof r)throw new TypeError(`${t} is not an object.`);var r}function $(e,t){if("function"!=typeof e)throw new TypeError(`${t} is not a function.`)}function M(e,t){if(!function(e){return"object"==typeof e&&null!==e||"function"==typeof e}(e))throw new TypeError(`${t} is not an object.`)}function B(e,t,r){if(void 0===e)throw new TypeError(`Parameter ${t} is required in '${r}'.`)}function W(e,t,r){if(void 0===e)throw new TypeError(`${t} is required in '${r}'.`)}function F(e){return Number(e)}function U(e){return 0===e?0:e}function z(e,t){const r=Number.MAX_SAFE_INTEGER;let o=Number(e);if(o=U(o),!q(o))throw new TypeError(`${t} is not a finite number`);if(o=function(e){return U(L(e))}(o),o<0||o>r)throw new TypeError(`${t} is outside the accepted range of 0 to ${r}, inclusive`);return q(o)&&0!==o?o:0}function N(e,t){if(!Ir(e))throw new TypeError(`${t} is not a ReadableStream.`)}function V(e){return new Y(e)}function H(e,t){e._reader._readRequests.push(t)}function K(e,t,r){const o=e._reader._readRequests.shift();r?o._closeSteps():o._chunkSteps(t)}function G(e){return e._reader._readRequests.length}function Q(e){const t=e._reader;return void 0!==t&&!!J(t)}class Y{constructor(e){if(B(e,1,"ReadableStreamDefaultReader"),N(e,"First parameter"),xr(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");j(this,e),this._readRequests=new w}get closed(){return J(this)?this._closedPromise:u(ee("closed"))}cancel(e=void 0){return J(this)?void 0===this._ownerReadableStream?u(O("cancel")):R(this,e):u(ee("cancel"))}read(){if(!J(this))return u(ee("read"));if(void 0===this._ownerReadableStream)return u(O("read from"));let e,t;const r=l(((r,o)=>{e=r,t=o}));return Z(this,{_chunkSteps:t=>e({value:t,done:!1}),_closeSteps:()=>e({value:void 0,done:!0}),_errorSteps:e=>t(e)}),r}releaseLock(){if(!J(this))throw ee("releaseLock");void 0!==this._ownerReadableStream&&function(e){A(e);X(e,new TypeError("Reader was released"))}(this)}}function J(e){return!!r(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readRequests")&&e instanceof Y}function Z(e,t){const r=e._ownerReadableStream;r._disturbed=!0,"closed"===r._state?t._closeSteps():"errored"===r._state?t._errorSteps(r._storedError):r._readableStreamController[P](t)}function X(e,t){const r=e._readRequests;e._readRequests=new w,r.forEach((e=>{e._errorSteps(t)}))}function ee(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties(Y.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),n(Y.prototype.cancel,"cancel"),n(Y.prototype.read,"read"),n(Y.prototype.releaseLock,"releaseLock"),"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(Y.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});const te=Object.getPrototypeOf(Object.getPrototypeOf((async function*(){})).prototype);class re{constructor(e,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=e,this._preventCancel=t}next(){const e=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?y(this._ongoingPromise,e,e):e(),this._ongoingPromise}return(e){const t=()=>this._returnSteps(e);return this._ongoingPromise?y(this._ongoingPromise,t,t):t()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});const e=this._reader;let t,r;const o=l(((e,o)=>{t=e,r=o}));return Z(e,{_chunkSteps:e=>{this._ongoingPromise=void 0,b((()=>t({value:e,done:!1})))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,A(e),t({value:void 0,done:!0})},_errorSteps:t=>{this._ongoingPromise=void 0,this._isFinished=!0,A(e),r(t)}}),o}_returnSteps(e){if(this._isFinished)return Promise.resolve({value:e,done:!0});this._isFinished=!0;const t=this._reader;if(!this._preventCancel){const r=R(t,e);return A(t),y(r,(()=>({value:e,done:!0})))}return A(t),c({value:e,done:!0})}}const oe={next(){return ne(this)?this._asyncIteratorImpl.next():u(ie("next"))},return(e){return ne(this)?this._asyncIteratorImpl.return(e):u(ie("return"))}};function ne(e){if(!r(e))return!1;if(!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof re}catch(e){return!1}}function ie(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}Object.setPrototypeOf(oe,te);const se=Number.isNaN||function(e){return e!=e};var ae,le,ce;function ue(e){return e.slice()}function de(e,t,r,o,n){new Uint8Array(e).set(new Uint8Array(r,o,n),t)}let fe=e=>(fe="function"==typeof e.transfer?e=>e.transfer():"function"==typeof structuredClone?e=>structuredClone(e,{transfer:[e]}):e=>e,fe(e)),pe=e=>(pe="boolean"==typeof e.detached?e=>e.detached:e=>0===e.byteLength,pe(e));function he(e,t,r){if(e.slice)return e.slice(t,r);const o=r-t,n=new ArrayBuffer(o);return de(n,0,e,t,o),n}function ye(e,t){const r=e[t];if(null!=r){if("function"!=typeof r)throw new TypeError(`${String(t)} is not a function`);return r}}const me=null!==(ce=null!==(ae=Symbol.asyncIterator)&&void 0!==ae?ae:null===(le=Symbol.for)||void 0===le?void 0:le.call(Symbol,"Symbol.asyncIterator"))&&void 0!==ce?ce:"@@asyncIterator";function be(e,t="sync",o){if(void 0===o)if("async"===t){if(void 0===(o=ye(e,me)))return function(e){const t={[Symbol.iterator]:()=>e.iterator},r=async function*(){return yield*t}();return{iterator:r,nextMethod:r.next,done:!1}}(be(e,"sync",ye(e,Symbol.iterator)))}else o=ye(e,Symbol.iterator);if(void 0===o)throw new TypeError("The object is not iterable");const n=g(o,e,[]);if(!r(n))throw new TypeError("The iterator method must return an object");return{iterator:n,nextMethod:n.next,done:!1}}function ge(e){const t=he(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function ve(e){const t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function we(e,t,r){if("number"!=typeof(o=r)||se(o)||o<0||r===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");var o;e._queue.push({value:t,size:r}),e._queueTotalSize+=r}function _e(e){e._queue=new w,e._queueTotalSize=0}function Se(e){return e===DataView}class Ee{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!je(this))throw Je("view");return this._view}respond(e){if(!je(this))throw Je("respond");if(B(e,1,"respond"),e=z(e,"First parameter"),void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(pe(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");Ge(this._associatedReadableByteStreamController,e)}respondWithNewView(e){if(!je(this))throw Je("respondWithNewView");if(B(e,1,"respondWithNewView"),!ArrayBuffer.isView(e))throw new TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw new TypeError("This BYOB request has been invalidated");if(pe(e.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");Qe(this._associatedReadableByteStreamController,e)}}Object.defineProperties(Ee.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),n(Ee.prototype.respond,"respond"),n(Ee.prototype.respondWithNewView,"respondWithNewView"),"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(Ee.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Pe{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Te(this))throw Ze("byobRequest");return He(this)}get desiredSize(){if(!Te(this))throw Ze("desiredSize");return Ke(this)}close(){if(!Te(this))throw Ze("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");const e=this._controlledReadableByteStream._state;if("readable"!==e)throw new TypeError(`The stream (in ${e} state) is not in the readable state and cannot be closed`);Ue(this)}enqueue(e){if(!Te(this))throw Ze("enqueue");if(B(e,1,"enqueue"),!ArrayBuffer.isView(e))throw new TypeError("chunk must be an array buffer view");if(0===e.byteLength)throw new TypeError("chunk must have non-zero byteLength");if(0===e.buffer.byteLength)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");const t=this._controlledReadableByteStream._state;if("readable"!==t)throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be enqueued to`);ze(this,e)}error(e=void 0){if(!Te(this))throw Ze("error");Ne(this,e)}[E](e){Ae(this),_e(this);const t=this._cancelAlgorithm(e);return Fe(this),t}[P](e){const t=this._controlledReadableByteStream;if(this._queueTotalSize>0)return void Ve(this,e);const r=this._autoAllocateChunkSize;if(void 0!==r){let t;try{t=new ArrayBuffer(r)}catch(t){return void e._errorSteps(t)}const o={buffer:t,bufferByteLength:r,byteOffset:0,byteLength:r,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(o)}H(t,e),Re(this)}[T](){if(this._pendingPullIntos.length>0){const e=this._pendingPullIntos.peek();e.readerType="none",this._pendingPullIntos=new w,this._pendingPullIntos.push(e)}}}function Te(e){return!!r(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")&&e instanceof Pe}function je(e){return!!r(e)&&!!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")&&e instanceof Ee}function Re(e){const t=function(e){const t=e._controlledReadableByteStream;if("readable"!==t._state)return!1;if(e._closeRequested)return!1;if(!e._started)return!1;if(Q(t)&&G(t)>0)return!0;if(ot(t)&&rt(t)>0)return!0;return Ke(e)>0}(e);t&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,f(e._pullAlgorithm(),(()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Re(e)),null)),(t=>(Ne(e,t),null)))))}function Ae(e){$e(e),e._pendingPullIntos=new w}function Oe(e,t){let r=!1;"closed"===e._state&&(r=!0);const o=ke(t);"default"===t.readerType?K(e,o,r):function(e,t,r){const o=e._reader._readIntoRequests.shift();r?o._closeSteps(t):o._chunkSteps(t)}(e,o,r)}function ke(e){const t=e.bytesFilled,r=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/r)}function Ce(e,t,r,o){e._queue.push({buffer:t,byteOffset:r,byteLength:o}),e._queueTotalSize+=o}function Ie(e,t,r,o){let n;try{n=he(t,r,r+o)}catch(t){throw Ne(e,t),t}Ce(e,n,0,o)}function xe(e,t){t.bytesFilled>0&&Ie(e,t.buffer,t.byteOffset,t.bytesFilled),We(e)}function qe(e,t){const r=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),o=t.bytesFilled+r;let n=r,i=!1;const s=o-o%t.elementSize;s>=t.minimumFill&&(n=s-t.bytesFilled,i=!0);const a=e._queue;for(;n>0;){const r=a.peek(),o=Math.min(n,r.byteLength),i=t.byteOffset+t.bytesFilled;de(t.buffer,i,r.buffer,r.byteOffset,o),r.byteLength===o?a.shift():(r.byteOffset+=o,r.byteLength-=o),e._queueTotalSize-=o,Le(0,o,t),n-=o}return i}function Le(e,t,r){r.bytesFilled+=t}function De(e){0===e._queueTotalSize&&e._closeRequested?(Fe(e),Lr(e._controlledReadableByteStream)):Re(e)}function $e(e){null!==e._byobRequest&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Me(e){for(;e._pendingPullIntos.length>0;){if(0===e._queueTotalSize)return;const t=e._pendingPullIntos.peek();qe(e,t)&&(We(e),Oe(e._controlledReadableByteStream,t))}}function Be(e,t){const r=e._pendingPullIntos.peek();$e(e),"closed"===e._controlledReadableByteStream._state?function(e,t){"none"===t.readerType&&We(e);const r=e._controlledReadableByteStream;if(ot(r))for(;rt(r)>0;)Oe(r,We(e))}(e,r):function(e,t,r){if(Le(0,t,r),"none"===r.readerType)return xe(e,r),void Me(e);if(r.bytesFilled<r.minimumFill)return;We(e);const o=r.bytesFilled%r.elementSize;if(o>0){const t=r.byteOffset+r.bytesFilled;Ie(e,r.buffer,t-o,o)}r.bytesFilled-=o,Oe(e._controlledReadableByteStream,r),Me(e)}(e,t,r),Re(e)}function We(e){return e._pendingPullIntos.shift()}function Fe(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Ue(e){const t=e._controlledReadableByteStream;if(!e._closeRequested&&"readable"===t._state)if(e._queueTotalSize>0)e._closeRequested=!0;else{if(e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek();if(t.bytesFilled%t.elementSize!=0){const t=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Ne(e,t),t}}Fe(e),Lr(t)}}function ze(e,t){const r=e._controlledReadableByteStream;if(e._closeRequested||"readable"!==r._state)return;const{buffer:o,byteOffset:n,byteLength:i}=t;if(pe(o))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");const s=fe(o);if(e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek();if(pe(t.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");$e(e),t.buffer=fe(t.buffer),"none"===t.readerType&&xe(e,t)}Q(r)?(function(e){const t=e._controlledReadableByteStream._reader;for(;t._readRequests.length>0;){if(0===e._queueTotalSize)return;Ve(e,t._readRequests.shift())}}(e),0===G(r)?Ce(e,s,n,i):(e._pendingPullIntos.length>0&&We(e),K(r,new Uint8Array(s,n,i),!1))):ot(r)?(Ce(e,s,n,i),Me(e)):Ce(e,s,n,i),Re(e)}function Ne(e,t){const r=e._controlledReadableByteStream;"readable"===r._state&&(Ae(e),_e(e),Fe(e),Dr(r,t))}function Ve(e,t){const r=e._queue.shift();e._queueTotalSize-=r.byteLength,De(e);const o=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);t._chunkSteps(o)}function He(e){if(null===e._byobRequest&&e._pendingPullIntos.length>0){const t=e._pendingPullIntos.peek(),r=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),o=Object.create(Ee.prototype);!function(e,t,r){e._associatedReadableByteStreamController=t,e._view=r}(o,e,r),e._byobRequest=o}return e._byobRequest}function Ke(e){const t=e._controlledReadableByteStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function Ge(e,t){const r=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===t)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(r.bytesFilled+t>r.byteLength)throw new RangeError("bytesWritten out of range")}r.buffer=fe(r.buffer),Be(e,t)}function Qe(e,t){const r=e._pendingPullIntos.peek();if("closed"===e._controlledReadableByteStream._state){if(0!==t.byteLength)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===t.byteLength)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(r.byteOffset+r.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(r.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(r.bytesFilled+t.byteLength>r.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");const o=t.byteLength;r.buffer=fe(t.buffer),Be(e,o)}function Ye(e,t,r,o,n,i,s){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,_e(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=i,t._pullAlgorithm=o,t._cancelAlgorithm=n,t._autoAllocateChunkSize=s,t._pendingPullIntos=new w,e._readableStreamController=t,f(c(r()),(()=>(t._started=!0,Re(t),null)),(e=>(Ne(t,e),null)))}function Je(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Ze(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Xe(e,t){if("byob"!=(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function et(e){return new nt(e)}function tt(e,t){e._reader._readIntoRequests.push(t)}function rt(e){return e._reader._readIntoRequests.length}function ot(e){const t=e._reader;return void 0!==t&&!!it(t)}Object.defineProperties(Pe.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),n(Pe.prototype.close,"close"),n(Pe.prototype.enqueue,"enqueue"),n(Pe.prototype.error,"error"),"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(Pe.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});class nt{constructor(e){if(B(e,1,"ReadableStreamBYOBReader"),N(e,"First parameter"),xr(e))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Te(e._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");j(this,e),this._readIntoRequests=new w}get closed(){return it(this)?this._closedPromise:u(lt("closed"))}cancel(e=void 0){return it(this)?void 0===this._ownerReadableStream?u(O("cancel")):R(this,e):u(lt("cancel"))}read(e,t={}){if(!it(this))return u(lt("read"));if(!ArrayBuffer.isView(e))return u(new TypeError("view must be an array buffer view"));if(0===e.byteLength)return u(new TypeError("view must have non-zero byteLength"));if(0===e.buffer.byteLength)return u(new TypeError("view's buffer must have non-zero byteLength"));if(pe(e.buffer))return u(new TypeError("view's buffer has been detached"));let r;try{r=function(e,t){var r;return D(e,t),{min:z(null!==(r=null==e?void 0:e.min)&&void 0!==r?r:1,`${t} has member 'min' that`)}}(t,"options")}catch(e){return u(e)}const o=r.min;if(0===o)return u(new TypeError("options.min must be greater than 0"));if(function(e){return Se(e.constructor)}(e)){if(o>e.byteLength)return u(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(o>e.length)return u(new RangeError("options.min must be less than or equal to view's length"));if(void 0===this._ownerReadableStream)return u(O("read from"));let n,i;const s=l(((e,t)=>{n=e,i=t}));return st(this,e,o,{_chunkSteps:e=>n({value:e,done:!1}),_closeSteps:e=>n({value:e,done:!0}),_errorSteps:e=>i(e)}),s}releaseLock(){if(!it(this))throw lt("releaseLock");void 0!==this._ownerReadableStream&&function(e){A(e);at(e,new TypeError("Reader was released"))}(this)}}function it(e){return!!r(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")&&e instanceof nt}function st(e,t,r,o){const n=e._ownerReadableStream;n._disturbed=!0,"errored"===n._state?o._errorSteps(n._storedError):function(e,t,r,o){const n=e._controlledReadableByteStream,i=t.constructor,s=function(e){return Se(e)?1:e.BYTES_PER_ELEMENT}(i),{byteOffset:a,byteLength:l}=t,c=r*s;let u;try{u=fe(t.buffer)}catch(e){return void o._errorSteps(e)}const d={buffer:u,bufferByteLength:u.byteLength,byteOffset:a,byteLength:l,bytesFilled:0,minimumFill:c,elementSize:s,viewConstructor:i,readerType:"byob"};if(e._pendingPullIntos.length>0)return e._pendingPullIntos.push(d),void tt(n,o);if("closed"!==n._state){if(e._queueTotalSize>0){if(qe(e,d)){const t=ke(d);return De(e),void o._chunkSteps(t)}if(e._closeRequested){const t=new TypeError("Insufficient bytes to fill elements in the given buffer");return Ne(e,t),void o._errorSteps(t)}}e._pendingPullIntos.push(d),tt(n,o),Re(e)}else{const e=new i(d.buffer,d.byteOffset,0);o._closeSteps(e)}}(n._readableStreamController,t,r,o)}function at(e,t){const r=e._readIntoRequests;e._readIntoRequests=new w,r.forEach((e=>{e._errorSteps(t)}))}function lt(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function ct(e,t){const{highWaterMark:r}=e;if(void 0===r)return t;if(se(r)||r<0)throw new RangeError("Invalid highWaterMark");return r}function ut(e){const{size:t}=e;return t||(()=>1)}function dt(e,t){D(e,t);const r=null==e?void 0:e.highWaterMark,o=null==e?void 0:e.size;return{highWaterMark:void 0===r?void 0:F(r),size:void 0===o?void 0:ft(o,`${t} has member 'size' that`)}}function ft(e,t){return $(e,t),t=>F(e(t))}function pt(e,t,r){return $(e,r),r=>v(e,t,[r])}function ht(e,t,r){return $(e,r),()=>v(e,t,[])}function yt(e,t,r){return $(e,r),r=>g(e,t,[r])}function mt(e,t,r){return $(e,r),(r,o)=>v(e,t,[r,o])}function bt(e,t){if(!St(e))throw new TypeError(`${t} is not a WritableStream.`)}Object.defineProperties(nt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),n(nt.prototype.cancel,"cancel"),n(nt.prototype.read,"read"),n(nt.prototype.releaseLock,"releaseLock"),"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(nt.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});const gt="function"==typeof AbortController;class vt{constructor(e={},t={}){void 0===e?e=null:M(e,"First parameter");const r=dt(t,"Second parameter"),o=function(e,t){D(e,t);const r=null==e?void 0:e.abort,o=null==e?void 0:e.close,n=null==e?void 0:e.start,i=null==e?void 0:e.type,s=null==e?void 0:e.write;return{abort:void 0===r?void 0:pt(r,e,`${t} has member 'abort' that`),close:void 0===o?void 0:ht(o,e,`${t} has member 'close' that`),start:void 0===n?void 0:yt(n,e,`${t} has member 'start' that`),write:void 0===s?void 0:mt(s,e,`${t} has member 'write' that`),type:i}}(e,"First parameter");if(_t(this),void 0!==o.type)throw new RangeError("Invalid type is specified");const n=ut(r);!function(e,t,r,o){const n=Object.create(Bt.prototype);let i,s,a,l;i=void 0!==t.start?()=>t.start(n):()=>{},s=void 0!==t.write?e=>t.write(e,n):()=>c(void 0),a=void 0!==t.close?()=>t.close():()=>c(void 0),l=void 0!==t.abort?e=>t.abort(e):()=>c(void 0),Ft(e,n,i,s,a,l,r,o)}(this,o,ct(r,1),n)}get locked(){if(!St(this))throw Gt("locked");return Et(this)}abort(e=void 0){return St(this)?Et(this)?u(new TypeError("Cannot abort a stream that already has a writer")):Pt(this,e):u(Gt("abort"))}close(){return St(this)?Et(this)?u(new TypeError("Cannot close a stream that already has a writer")):Ot(this)?u(new TypeError("Cannot close an already-closing stream")):Tt(this):u(Gt("close"))}getWriter(){if(!St(this))throw Gt("getWriter");return wt(this)}}function wt(e){return new It(e)}function _t(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new w,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function St(e){return!!r(e)&&!!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")&&e instanceof vt}function Et(e){return void 0!==e._writer}function Pt(e,t){var r;if("closed"===e._state||"errored"===e._state)return c(void 0);e._writableStreamController._abortReason=t,null===(r=e._writableStreamController._abortController)||void 0===r||r.abort(t);const o=e._state;if("closed"===o||"errored"===o)return c(void 0);if(void 0!==e._pendingAbortRequest)return e._pendingAbortRequest._promise;let n=!1;"erroring"===o&&(n=!0,t=void 0);const i=l(((r,o)=>{e._pendingAbortRequest={_promise:void 0,_resolve:r,_reject:o,_reason:t,_wasAlreadyErroring:n}}));return e._pendingAbortRequest._promise=i,n||Rt(e,t),i}function Tt(e){const t=e._state;if("closed"===t||"errored"===t)return u(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));const r=l(((t,r)=>{const o={_resolve:t,_reject:r};e._closeRequest=o})),o=e._writer;var n;return void 0!==o&&e._backpressure&&"writable"===t&&sr(o),we(n=e._writableStreamController,Mt,0),Nt(n),r}function jt(e,t){"writable"!==e._state?At(e):Rt(e,t)}function Rt(e,t){const r=e._writableStreamController;e._state="erroring",e._storedError=t;const o=e._writer;void 0!==o&&Lt(o,t),!function(e){return void 0!==e._inFlightWriteRequest||void 0!==e._inFlightCloseRequest}(e)&&r._started&&At(e)}function At(e){e._state="errored",e._writableStreamController[S]();const t=e._storedError;if(e._writeRequests.forEach((e=>{e._reject(t)})),e._writeRequests=new w,void 0===e._pendingAbortRequest)return void kt(e);const r=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,r._wasAlreadyErroring)return r._reject(t),void kt(e);f(e._writableStreamController[_](r._reason),(()=>(r._resolve(),kt(e),null)),(t=>(r._reject(t),kt(e),null)))}function Ot(e){return void 0!==e._closeRequest||void 0!==e._inFlightCloseRequest}function kt(e){void 0!==e._closeRequest&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);const t=e._writer;void 0!==t&&er(t,e._storedError)}function Ct(e,t){const r=e._writer;void 0!==r&&t!==e._backpressure&&(t?function(e){rr(e)}(r):sr(r)),e._backpressure=t}Object.defineProperties(vt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),n(vt.prototype.abort,"abort"),n(vt.prototype.close,"close"),n(vt.prototype.getWriter,"getWriter"),"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(vt.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});class It{constructor(e){if(B(e,1,"WritableStreamDefaultWriter"),bt(e,"First parameter"),Et(e))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=e,e._writer=this;const t=e._state;if("writable"===t)!Ot(e)&&e._backpressure?rr(this):nr(this),Zt(this);else if("erroring"===t)or(this,e._storedError),Zt(this);else if("closed"===t)nr(this),Zt(this),tr(this);else{const t=e._storedError;or(this,t),Xt(this,t)}}get closed(){return xt(this)?this._closedPromise:u(Yt("closed"))}get desiredSize(){if(!xt(this))throw Yt("desiredSize");if(void 0===this._ownerWritableStream)throw Jt("desiredSize");return function(e){const t=e._ownerWritableStream,r=t._state;return"errored"===r||"erroring"===r?null:"closed"===r?0:zt(t._writableStreamController)}(this)}get ready(){return xt(this)?this._readyPromise:u(Yt("ready"))}abort(e=void 0){return xt(this)?void 0===this._ownerWritableStream?u(Jt("abort")):function(e,t){return Pt(e._ownerWritableStream,t)}(this,e):u(Yt("abort"))}close(){if(!xt(this))return u(Yt("close"));const e=this._ownerWritableStream;return void 0===e?u(Jt("close")):Ot(e)?u(new TypeError("Cannot close an already-closing stream")):qt(this)}releaseLock(){if(!xt(this))throw Yt("releaseLock");void 0!==this._ownerWritableStream&&Dt(this)}write(e=void 0){return xt(this)?void 0===this._ownerWritableStream?u(Jt("write to")):$t(this,e):u(Yt("write"))}}function xt(e){return!!r(e)&&!!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")&&e instanceof It}function qt(e){return Tt(e._ownerWritableStream)}function Lt(e,t){"pending"===e._readyPromiseState?ir(e,t):function(e,t){or(e,t)}(e,t)}function Dt(e){const t=e._ownerWritableStream,r=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Lt(e,r),function(e,t){"pending"===e._closedPromiseState?er(e,t):function(e,t){Xt(e,t)}(e,t)}(e,r),t._writer=void 0,e._ownerWritableStream=void 0}function $t(e,t){const r=e._ownerWritableStream,o=r._writableStreamController,n=function(e,t){try{return e._strategySizeAlgorithm(t)}catch(t){return Vt(e,t),1}}(o,t);if(r!==e._ownerWritableStream)return u(Jt("write to"));const i=r._state;if("errored"===i)return u(r._storedError);if(Ot(r)||"closed"===i)return u(new TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===i)return u(r._storedError);const s=function(e){return l(((t,r)=>{const o={_resolve:t,_reject:r};e._writeRequests.push(o)}))}(r);return function(e,t,r){try{we(e,t,r)}catch(t){return void Vt(e,t)}const o=e._controlledWritableStream;Ot(o)||"writable"!==o._state||Ct(o,Ht(e)),Nt(e)}(o,t,n),s}Object.defineProperties(It.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),n(It.prototype.abort,"abort"),n(It.prototype.close,"close"),n(It.prototype.releaseLock,"releaseLock"),n(It.prototype.write,"write"),"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(It.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});const Mt={};class Bt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Wt(this))throw Qt("abortReason");return this._abortReason}get signal(){if(!Wt(this))throw Qt("signal");if(void 0===this._abortController)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(e=void 0){if(!Wt(this))throw Qt("error");"writable"===this._controlledWritableStream._state&&Kt(this,e)}[_](e){const t=this._abortAlgorithm(e);return Ut(this),t}[S](){_e(this)}}function Wt(e){return!!r(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")&&e instanceof Bt}function Ft(e,t,r,o,n,i,s,a){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,_e(t),t._abortReason=void 0,t._abortController=function(){if(gt)return new AbortController}(),t._started=!1,t._strategySizeAlgorithm=a,t._strategyHWM=s,t._writeAlgorithm=o,t._closeAlgorithm=n,t._abortAlgorithm=i;const l=Ht(t);Ct(e,l),f(c(r()),(()=>(t._started=!0,Nt(t),null)),(r=>(t._started=!0,jt(e,r),null)))}function Ut(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function zt(e){return e._strategyHWM-e._queueTotalSize}function Nt(e){const t=e._controlledWritableStream;if(!e._started)return;if(void 0!==t._inFlightWriteRequest)return;if("erroring"===t._state)return void At(t);if(0===e._queue.length)return;const r=e._queue.peek().value;r===Mt?function(e){const t=e._controlledWritableStream;(function(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0})(t),ve(e);const r=e._closeAlgorithm();Ut(e),f(r,(()=>(function(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,"erroring"===e._state&&(e._storedError=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";const t=e._writer;void 0!==t&&tr(t)}(t),null)),(e=>(function(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,void 0!==e._pendingAbortRequest&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),jt(e,t)}(t,e),null)))}(e):function(e,t){const r=e._controlledWritableStream;!function(e){e._inFlightWriteRequest=e._writeRequests.shift()}(r);f(e._writeAlgorithm(t),(()=>{!function(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}(r);const t=r._state;if(ve(e),!Ot(r)&&"writable"===t){const t=Ht(e);Ct(r,t)}return Nt(e),null}),(t=>("writable"===r._state&&Ut(e),function(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,jt(e,t)}(r,t),null)))}(e,r)}function Vt(e,t){"writable"===e._controlledWritableStream._state&&Kt(e,t)}function Ht(e){return zt(e)<=0}function Kt(e,t){const r=e._controlledWritableStream;Ut(e),Rt(r,t)}function Gt(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Qt(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Yt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Jt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Zt(e){e._closedPromise=l(((t,r)=>{e._closedPromise_resolve=t,e._closedPromise_reject=r,e._closedPromiseState="pending"}))}function Xt(e,t){Zt(e),er(e,t)}function er(e,t){void 0!==e._closedPromise_reject&&(m(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function tr(e){void 0!==e._closedPromise_resolve&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function rr(e){e._readyPromise=l(((t,r)=>{e._readyPromise_resolve=t,e._readyPromise_reject=r})),e._readyPromiseState="pending"}function or(e,t){rr(e),ir(e,t)}function nr(e){rr(e),sr(e)}function ir(e,t){void 0!==e._readyPromise_reject&&(m(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function sr(e){void 0!==e._readyPromise_resolve&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}Object.defineProperties(Bt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(Bt.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});const ar="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof global?global:void 0,lr=function(){const e=null==ar?void 0:ar.DOMException;return function(e){if("function"!=typeof e&&"object"!=typeof e)return!1;if("DOMException"!==e.name)return!1;try{return new e,!0}catch(e){return!1}}(e)?e:void 0}()||function(){const e=function(e,t){this.message=e||"",this.name=t||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return n(e,"DOMException"),e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}();function cr(e,r,o,n,i,s){const a=V(e),y=wt(r);e._disturbed=!0;let b=!1,g=c(void 0);return l(((v,w)=>{let _;if(void 0!==s){if(_=()=>{const t=void 0!==s.reason?s.reason:new lr("Aborted","AbortError"),o=[];n||o.push((()=>"writable"===r._state?Pt(r,t):c(void 0))),i||o.push((()=>"readable"===e._state?qr(e,t):c(void 0))),R((()=>Promise.all(o.map((e=>e())))),!0,t)},s.aborted)return void _();s.addEventListener("abort",_)}var S,E,P;if(j(e,a._closedPromise,(e=>(n?O(!0,e):R((()=>Pt(r,e)),!0,e),null))),j(r,y._closedPromise,(t=>(i?O(!0,t):R((()=>qr(e,t)),!0,t),null))),S=e,E=a._closedPromise,P=()=>(o?O():R((()=>function(e){const t=e._ownerWritableStream,r=t._state;return Ot(t)||"closed"===r?c(void 0):"errored"===r?u(t._storedError):qt(e)}(y))),null),"closed"===S._state?P():p(E,P),Ot(r)||"closed"===r._state){const t=new TypeError("the destination writable stream closed before all data could be piped to it");i?O(!0,t):R((()=>qr(e,t)),!0,t)}function T(){const e=g;return d(g,(()=>e!==g?T():void 0))}function j(e,t,r){"errored"===e._state?r(e._storedError):h(t,r)}function R(e,t,o){function n(){return f(e(),(()=>k(t,o)),(e=>k(!0,e))),null}b||(b=!0,"writable"!==r._state||Ot(r)?n():p(T(),n))}function O(e,t){b||(b=!0,"writable"!==r._state||Ot(r)?k(e,t):p(T(),(()=>k(e,t))))}function k(e,t){return Dt(y),A(a),void 0!==s&&s.removeEventListener("abort",_),e?w(t):v(void 0),null}m(l(((e,r)=>{!function o(n){n?e():d(b?c(!0):d(y._readyPromise,(()=>l(((e,r)=>{Z(a,{_chunkSteps:r=>{g=d($t(y,r),void 0,t),e(!1)},_closeSteps:()=>e(!0),_errorSteps:r})})))),o,r)}(!1)})))}))}class ur{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!dr(this))throw _r("desiredSize");return gr(this)}close(){if(!dr(this))throw _r("close");if(!vr(this))throw new TypeError("The stream is not in a state that permits close");yr(this)}enqueue(e=void 0){if(!dr(this))throw _r("enqueue");if(!vr(this))throw new TypeError("The stream is not in a state that permits enqueue");return mr(this,e)}error(e=void 0){if(!dr(this))throw _r("error");br(this,e)}[E](e){_e(this);const t=this._cancelAlgorithm(e);return hr(this),t}[P](e){const t=this._controlledReadableStream;if(this._queue.length>0){const r=ve(this);this._closeRequested&&0===this._queue.length?(hr(this),Lr(t)):fr(this),e._chunkSteps(r)}else H(t,e),fr(this)}[T](){}}function dr(e){return!!r(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")&&e instanceof ur}function fr(e){pr(e)&&(e._pulling?e._pullAgain=!0:(e._pulling=!0,f(e._pullAlgorithm(),(()=>(e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,fr(e)),null)),(t=>(br(e,t),null)))))}function pr(e){const t=e._controlledReadableStream;return!!vr(e)&&!!e._started&&(!!(xr(t)&&G(t)>0)||gr(e)>0)}function hr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function yr(e){if(!vr(e))return;const t=e._controlledReadableStream;e._closeRequested=!0,0===e._queue.length&&(hr(e),Lr(t))}function mr(e,t){if(!vr(e))return;const r=e._controlledReadableStream;if(xr(r)&&G(r)>0)K(r,t,!1);else{let r;try{r=e._strategySizeAlgorithm(t)}catch(t){throw br(e,t),t}try{we(e,t,r)}catch(t){throw br(e,t),t}}fr(e)}function br(e,t){const r=e._controlledReadableStream;"readable"===r._state&&(_e(e),hr(e),Dr(r,t))}function gr(e){const t=e._controlledReadableStream._state;return"errored"===t?null:"closed"===t?0:e._strategyHWM-e._queueTotalSize}function vr(e){const t=e._controlledReadableStream._state;return!e._closeRequested&&"readable"===t}function wr(e,t,r,o,n,i,s){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,_e(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=s,t._strategyHWM=i,t._pullAlgorithm=o,t._cancelAlgorithm=n,e._readableStreamController=t,f(c(r()),(()=>(t._started=!0,fr(t),null)),(e=>(br(t,e),null)))}function _r(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Sr(e){return r(o=e)&&void 0!==o.getReader?function(e){let o;return o=Or(t,(function(){let t;try{t=e.read()}catch(e){return u(e)}return y(t,(e=>{if(!r(e))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(e.done)yr(o._readableStreamController);else{const t=e.value;mr(o._readableStreamController,t)}}))}),(function(t){try{return c(e.cancel(t))}catch(e){return u(e)}}),0),o}(e.getReader()):function(e){let o;const n=be(e,"async");return o=Or(t,(function(){let e;try{e=function(e){const t=g(e.nextMethod,e.iterator,[]);if(!r(t))throw new TypeError("The iterator.next() method must return an object");return t}(n)}catch(e){return u(e)}return y(c(e),(e=>{if(!r(e))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");const t=function(e){return Boolean(e.done)}(e);if(t)yr(o._readableStreamController);else{const t=function(e){return e.value}(e);mr(o._readableStreamController,t)}}))}),(function(e){const t=n.iterator;let o,i;try{o=ye(t,"return")}catch(e){return u(e)}if(void 0===o)return c(void 0);try{i=g(o,t,[e])}catch(e){return u(e)}return y(c(i),(e=>{if(!r(e))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")}))}),0),o}(e);var o}function Er(e,t,r){return $(e,r),r=>v(e,t,[r])}function Pr(e,t,r){return $(e,r),r=>v(e,t,[r])}function Tr(e,t,r){return $(e,r),r=>g(e,t,[r])}function jr(e,t){if("bytes"!=(e=`${e}`))throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Rr(e,t){D(e,t);const r=null==e?void 0:e.preventAbort,o=null==e?void 0:e.preventCancel,n=null==e?void 0:e.preventClose,i=null==e?void 0:e.signal;return void 0!==i&&function(e,t){if(!function(e){if("object"!=typeof e||null===e)return!1;try{return"boolean"==typeof e.aborted}catch(e){return!1}}(e))throw new TypeError(`${t} is not an AbortSignal.`)}(i,`${t} has member 'signal' that`),{preventAbort:Boolean(r),preventCancel:Boolean(o),preventClose:Boolean(n),signal:i}}Object.defineProperties(ur.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),n(ur.prototype.close,"close"),n(ur.prototype.enqueue,"enqueue"),n(ur.prototype.error,"error"),"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(ur.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});class Ar{constructor(e={},t={}){void 0===e?e=null:M(e,"First parameter");const r=dt(t,"Second parameter"),o=function(e,t){D(e,t);const r=e,o=null==r?void 0:r.autoAllocateChunkSize,n=null==r?void 0:r.cancel,i=null==r?void 0:r.pull,s=null==r?void 0:r.start,a=null==r?void 0:r.type;return{autoAllocateChunkSize:void 0===o?void 0:z(o,`${t} has member 'autoAllocateChunkSize' that`),cancel:void 0===n?void 0:Er(n,r,`${t} has member 'cancel' that`),pull:void 0===i?void 0:Pr(i,r,`${t} has member 'pull' that`),start:void 0===s?void 0:Tr(s,r,`${t} has member 'start' that`),type:void 0===a?void 0:jr(a,`${t} has member 'type' that`)}}(e,"First parameter");if(Cr(this),"bytes"===o.type){if(void 0!==r.size)throw new RangeError("The strategy for a byte stream cannot have a size function");!function(e,t,r){const o=Object.create(Pe.prototype);let n,i,s;n=void 0!==t.start?()=>t.start(o):()=>{},i=void 0!==t.pull?()=>t.pull(o):()=>c(void 0),s=void 0!==t.cancel?e=>t.cancel(e):()=>c(void 0);const a=t.autoAllocateChunkSize;if(0===a)throw new TypeError("autoAllocateChunkSize must be greater than 0");Ye(e,o,n,i,s,r,a)}(this,o,ct(r,0))}else{const e=ut(r);!function(e,t,r,o){const n=Object.create(ur.prototype);let i,s,a;i=void 0!==t.start?()=>t.start(n):()=>{},s=void 0!==t.pull?()=>t.pull(n):()=>c(void 0),a=void 0!==t.cancel?e=>t.cancel(e):()=>c(void 0),wr(e,n,i,s,a,r,o)}(this,o,ct(r,1),e)}}get locked(){if(!Ir(this))throw $r("locked");return xr(this)}cancel(e=void 0){return Ir(this)?xr(this)?u(new TypeError("Cannot cancel a stream that already has a reader")):qr(this,e):u($r("cancel"))}getReader(e=void 0){if(!Ir(this))throw $r("getReader");return void 0===function(e,t){D(e,t);const r=null==e?void 0:e.mode;return{mode:void 0===r?void 0:Xe(r,`${t} has member 'mode' that`)}}(e,"First parameter").mode?V(this):et(this)}pipeThrough(e,t={}){if(!Ir(this))throw $r("pipeThrough");B(e,1,"pipeThrough");const r=function(e,t){D(e,t);const r=null==e?void 0:e.readable;W(r,"readable","ReadableWritablePair"),N(r,`${t} has member 'readable' that`);const o=null==e?void 0:e.writable;return W(o,"writable","ReadableWritablePair"),bt(o,`${t} has member 'writable' that`),{readable:r,writable:o}}(e,"First parameter"),o=Rr(t,"Second parameter");if(xr(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Et(r.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");return m(cr(this,r.writable,o.preventClose,o.preventAbort,o.preventCancel,o.signal)),r.readable}pipeTo(e,t={}){if(!Ir(this))return u($r("pipeTo"));if(void 0===e)return u("Parameter 1 is required in 'pipeTo'.");if(!St(e))return u(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let r;try{r=Rr(t,"Second parameter")}catch(e){return u(e)}return xr(this)?u(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Et(e)?u(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):cr(this,e,r.preventClose,r.preventAbort,r.preventCancel,r.signal)}tee(){if(!Ir(this))throw $r("tee");return ue(Te((e=this)._readableStreamController)?function(e){let t,r,o,n,i,s=V(e),a=!1,u=!1,d=!1,f=!1,p=!1;const y=l((e=>{i=e}));function m(e){h(e._closedPromise,(t=>(e!==s||(Ne(o._readableStreamController,t),Ne(n._readableStreamController,t),f&&p||i(void 0)),null)))}function g(){it(s)&&(A(s),s=V(e),m(s)),Z(s,{_chunkSteps:t=>{b((()=>{u=!1,d=!1;const r=t;let s=t;if(!f&&!p)try{s=ge(t)}catch(t){return Ne(o._readableStreamController,t),Ne(n._readableStreamController,t),void i(qr(e,t))}f||ze(o._readableStreamController,r),p||ze(n._readableStreamController,s),a=!1,u?w():d&&_()}))},_closeSteps:()=>{a=!1,f||Ue(o._readableStreamController),p||Ue(n._readableStreamController),o._readableStreamController._pendingPullIntos.length>0&&Ge(o._readableStreamController,0),n._readableStreamController._pendingPullIntos.length>0&&Ge(n._readableStreamController,0),f&&p||i(void 0)},_errorSteps:()=>{a=!1}})}function v(t,r){J(s)&&(A(s),s=et(e),m(s));const l=r?n:o,c=r?o:n;st(s,t,1,{_chunkSteps:t=>{b((()=>{u=!1,d=!1;const o=r?p:f;if(r?f:p)o||Qe(l._readableStreamController,t);else{let r;try{r=ge(t)}catch(t){return Ne(l._readableStreamController,t),Ne(c._readableStreamController,t),void i(qr(e,t))}o||Qe(l._readableStreamController,t),ze(c._readableStreamController,r)}a=!1,u?w():d&&_()}))},_closeSteps:e=>{a=!1;const t=r?p:f,o=r?f:p;t||Ue(l._readableStreamController),o||Ue(c._readableStreamController),void 0!==e&&(t||Qe(l._readableStreamController,e),!o&&c._readableStreamController._pendingPullIntos.length>0&&Ge(c._readableStreamController,0)),t&&o||i(void 0)},_errorSteps:()=>{a=!1}})}function w(){if(a)return u=!0,c(void 0);a=!0;const e=He(o._readableStreamController);return null===e?g():v(e._view,!1),c(void 0)}function _(){if(a)return d=!0,c(void 0);a=!0;const e=He(n._readableStreamController);return null===e?g():v(e._view,!0),c(void 0)}function S(){}return o=kr(S,w,(function(o){if(f=!0,t=o,p){const o=ue([t,r]),n=qr(e,o);i(n)}return y})),n=kr(S,_,(function(o){if(p=!0,r=o,f){const o=ue([t,r]),n=qr(e,o);i(n)}return y})),m(s),[o,n]}(e):function(e){const t=V(e);let r,o,n,i,s,a=!1,u=!1,d=!1,f=!1;const p=l((e=>{s=e}));function y(){return a?(u=!0,c(void 0)):(a=!0,Z(t,{_chunkSteps:e=>{b((()=>{u=!1;const t=e,r=e;d||mr(n._readableStreamController,t),f||mr(i._readableStreamController,r),a=!1,u&&y()}))},_closeSteps:()=>{a=!1,d||yr(n._readableStreamController),f||yr(i._readableStreamController),d&&f||s(void 0)},_errorSteps:()=>{a=!1}}),c(void 0))}function m(){}return n=Or(m,y,(function(t){if(d=!0,r=t,f){const t=ue([r,o]),n=qr(e,t);s(n)}return p})),i=Or(m,y,(function(t){if(f=!0,o=t,d){const t=ue([r,o]),n=qr(e,t);s(n)}return p})),h(t._closedPromise,(e=>(br(n._readableStreamController,e),br(i._readableStreamController,e),d&&f||s(void 0),null))),[n,i]}(e));var e}values(e=void 0){if(!Ir(this))throw $r("values");return function(e,t){const r=V(e),o=new re(r,t),n=Object.create(oe);return n._asyncIteratorImpl=o,n}(this,function(e){D(e,"First parameter");const t=null==e?void 0:e.preventCancel;return{preventCancel:Boolean(t)}}(e).preventCancel)}[me](e){return this.values(e)}static from(e){return Sr(e)}}function Or(e,t,r,o=1,n=()=>1){const i=Object.create(Ar.prototype);return Cr(i),wr(i,Object.create(ur.prototype),e,t,r,o,n),i}function kr(e,t,r){const o=Object.create(Ar.prototype);return Cr(o),Ye(o,Object.create(Pe.prototype),e,t,r,0,void 0),o}function Cr(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Ir(e){return!!r(e)&&!!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")&&e instanceof Ar}function xr(e){return void 0!==e._reader}function qr(e,r){if(e._disturbed=!0,"closed"===e._state)return c(void 0);if("errored"===e._state)return u(e._storedError);Lr(e);const o=e._reader;if(void 0!==o&&it(o)){const e=o._readIntoRequests;o._readIntoRequests=new w,e.forEach((e=>{e._closeSteps(void 0)}))}return y(e._readableStreamController[E](r),t)}function Lr(e){e._state="closed";const t=e._reader;if(void 0!==t&&(x(t),J(t))){const e=t._readRequests;t._readRequests=new w,e.forEach((e=>{e._closeSteps()}))}}function Dr(e,t){e._state="errored",e._storedError=t;const r=e._reader;void 0!==r&&(I(r,t),J(r)?X(r,t):at(r,t))}function $r(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Mr(e,t){D(e,t);const r=null==e?void 0:e.highWaterMark;return W(r,"highWaterMark","QueuingStrategyInit"),{highWaterMark:F(r)}}Object.defineProperties(Ar,{from:{enumerable:!0}}),Object.defineProperties(Ar.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),n(Ar.from,"from"),n(Ar.prototype.cancel,"cancel"),n(Ar.prototype.getReader,"getReader"),n(Ar.prototype.pipeThrough,"pipeThrough"),n(Ar.prototype.pipeTo,"pipeTo"),n(Ar.prototype.tee,"tee"),n(Ar.prototype.values,"values"),"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(Ar.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(Ar.prototype,me,{value:Ar.prototype.values,writable:!0,configurable:!0});const Br=e=>e.byteLength;n(Br,"size");class Wr{constructor(e){B(e,1,"ByteLengthQueuingStrategy"),e=Mr(e,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Ur(this))throw Fr("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Ur(this))throw Fr("size");return Br}}function Fr(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Ur(e){return!!r(e)&&!!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")&&e instanceof Wr}Object.defineProperties(Wr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(Wr.prototype,Symbol.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});const zr=()=>1;n(zr,"size");class Nr{constructor(e){B(e,1,"CountQueuingStrategy"),e=Mr(e,"First parameter"),this._countQueuingStrategyHighWaterMark=e.highWaterMark}get highWaterMark(){if(!Hr(this))throw Vr("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Hr(this))throw Vr("size");return zr}}function Vr(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Hr(e){return!!r(e)&&!!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")&&e instanceof Nr}function Kr(e,t,r){return $(e,r),r=>v(e,t,[r])}function Gr(e,t,r){return $(e,r),r=>g(e,t,[r])}function Qr(e,t,r){return $(e,r),(r,o)=>v(e,t,[r,o])}function Yr(e,t,r){return $(e,r),r=>v(e,t,[r])}Object.defineProperties(Nr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(Nr.prototype,Symbol.toStringTag,{value:"CountQueuingStrategy",configurable:!0});class Jr{constructor(e={},t={},r={}){void 0===e&&(e=null);const o=dt(t,"Second parameter"),n=dt(r,"Third parameter"),i=function(e,t){D(e,t);const r=null==e?void 0:e.cancel,o=null==e?void 0:e.flush,n=null==e?void 0:e.readableType,i=null==e?void 0:e.start,s=null==e?void 0:e.transform,a=null==e?void 0:e.writableType;return{cancel:void 0===r?void 0:Yr(r,e,`${t} has member 'cancel' that`),flush:void 0===o?void 0:Kr(o,e,`${t} has member 'flush' that`),readableType:n,start:void 0===i?void 0:Gr(i,e,`${t} has member 'start' that`),transform:void 0===s?void 0:Qr(s,e,`${t} has member 'transform' that`),writableType:a}}(e,"First parameter");if(void 0!==i.readableType)throw new RangeError("Invalid readableType specified");if(void 0!==i.writableType)throw new RangeError("Invalid writableType specified");const s=ct(n,0),a=ut(n),d=ct(o,1),p=ut(o);let h;!function(e,t,r,o,n,i){function s(){return t}e._writable=function(e,t,r,o,n=1,i=()=>1){const s=Object.create(vt.prototype);return _t(s),Ft(s,Object.create(Bt.prototype),e,t,r,o,n,i),s}(s,(function(t){return function(e,t){const r=e._transformStreamController;return e._backpressure?y(e._backpressureChangePromise,(()=>{const o=e._writable;if("erroring"===o._state)throw o._storedError;return ao(r,t)})):ao(r,t)}(e,t)}),(function(){return function(e){const t=e._transformStreamController;if(void 0!==t._finishPromise)return t._finishPromise;const r=e._readable;t._finishPromise=l(((e,r)=>{t._finishPromise_resolve=e,t._finishPromise_reject=r}));const o=t._flushAlgorithm();return io(t),f(o,(()=>("errored"===r._state?uo(t,r._storedError):(yr(r._readableStreamController),co(t)),null)),(e=>(br(r._readableStreamController,e),uo(t,e),null))),t._finishPromise}(e)}),(function(t){return function(e,t){const r=e._transformStreamController;if(void 0!==r._finishPromise)return r._finishPromise;const o=e._readable;r._finishPromise=l(((e,t)=>{r._finishPromise_resolve=e,r._finishPromise_reject=t}));const n=r._cancelAlgorithm(t);return io(r),f(n,(()=>("errored"===o._state?uo(r,o._storedError):(br(o._readableStreamController,t),co(r)),null)),(e=>(br(o._readableStreamController,e),uo(r,e),null))),r._finishPromise}(e,t)}),r,o),e._readable=Or(s,(function(){return function(e){return ro(e,!1),e._backpressureChangePromise}(e)}),(function(t){return function(e,t){const r=e._transformStreamController;if(void 0!==r._finishPromise)return r._finishPromise;const o=e._writable;r._finishPromise=l(((e,t)=>{r._finishPromise_resolve=e,r._finishPromise_reject=t}));const n=r._cancelAlgorithm(t);return io(r),f(n,(()=>("errored"===o._state?uo(r,o._storedError):(Vt(o._writableStreamController,t),to(e),co(r)),null)),(t=>(Vt(o._writableStreamController,t),to(e),uo(r,t),null))),r._finishPromise}(e,t)}),n,i),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,ro(e,!0),e._transformStreamController=void 0}(this,l((e=>{h=e})),d,p,s,a),function(e,t){const r=Object.create(oo.prototype);let o,n,i;o=void 0!==t.transform?e=>t.transform(e,r):e=>{try{return so(r,e),c(void 0)}catch(e){return u(e)}},n=void 0!==t.flush?()=>t.flush(r):()=>c(void 0),i=void 0!==t.cancel?e=>t.cancel(e):()=>c(void 0),function(e,t,r,o,n){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=r,t._flushAlgorithm=o,t._cancelAlgorithm=n,t._finishPromise=void 0,t._finishPromise_resolve=void 0,t._finishPromise_reject=void 0}(e,r,o,n,i)}(this,i),void 0!==i.start?h(i.start(this._transformStreamController)):h(void 0)}get readable(){if(!Zr(this))throw fo("readable");return this._readable}get writable(){if(!Zr(this))throw fo("writable");return this._writable}}function Zr(e){return!!r(e)&&!!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")&&e instanceof Jr}function Xr(e,t){br(e._readable._readableStreamController,t),eo(e,t)}function eo(e,t){io(e._transformStreamController),Vt(e._writable._writableStreamController,t),to(e)}function to(e){e._backpressure&&ro(e,!1)}function ro(e,t){void 0!==e._backpressureChangePromise&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=l((t=>{e._backpressureChangePromise_resolve=t})),e._backpressure=t}Object.defineProperties(Jr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(Jr.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:!0});class oo{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!no(this))throw lo("desiredSize");return gr(this._controlledTransformStream._readable._readableStreamController)}enqueue(e=void 0){if(!no(this))throw lo("enqueue");so(this,e)}error(e=void 0){if(!no(this))throw lo("error");var t;t=e,Xr(this._controlledTransformStream,t)}terminate(){if(!no(this))throw lo("terminate");!function(e){const t=e._controlledTransformStream;yr(t._readable._readableStreamController);eo(t,new TypeError("TransformStream terminated"))}(this)}}function no(e){return!!r(e)&&!!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")&&e instanceof oo}function io(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0,e._cancelAlgorithm=void 0}function so(e,t){const r=e._controlledTransformStream,o=r._readable._readableStreamController;if(!vr(o))throw new TypeError("Readable side is not in a state that permits enqueue");try{mr(o,t)}catch(e){throw eo(r,e),r._readable._storedError}const n=function(e){return!pr(e)}(o);n!==r._backpressure&&ro(r,!0)}function ao(e,t){return y(e._transformAlgorithm(t),void 0,(t=>{throw Xr(e._controlledTransformStream,t),t}))}function lo(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function co(e){void 0!==e._finishPromise_resolve&&(e._finishPromise_resolve(),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function uo(e,t){void 0!==e._finishPromise_reject&&(m(e._finishPromise),e._finishPromise_reject(t),e._finishPromise_resolve=void 0,e._finishPromise_reject=void 0)}function fo(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}Object.defineProperties(oo.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),n(oo.prototype.enqueue,"enqueue"),n(oo.prototype.error,"error"),n(oo.prototype.terminate,"terminate"),"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(oo.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),e.ByteLengthQueuingStrategy=Wr,e.CountQueuingStrategy=Nr,e.ReadableByteStreamController=Pe,e.ReadableStream=Ar,e.ReadableStreamBYOBReader=nt,e.ReadableStreamBYOBRequest=Ee,e.ReadableStreamDefaultController=ur,e.ReadableStreamDefaultReader=Y,e.TransformStream=Jr,e.TransformStreamDefaultController=oo,e.WritableStream=vt,e.WritableStreamDefaultController=Bt,e.WritableStreamDefaultWriter=It},r(t)},7242:(e,t,r)=>{const{isexe:o,sync:n}=r(6262),{join:i,delimiter:s,sep:a,posix:l}=r(6928),c="win32"===process.platform,u=new RegExp(`[${l.sep}${a===l.sep?"":a}]`.replace(/(\\)/g,"\\$1")),d=new RegExp(`^\\.${u.source}`),f=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),p=(e,{path:t=process.env.PATH,pathExt:r=process.env.PATHEXT,delimiter:o=s})=>{const n=e.match(u)?[""]:[...c?[process.cwd()]:[],...(t||"").split(o)];if(c){const t=r||[".EXE",".CMD",".BAT",".COM"].join(o),i=t.split(o).flatMap((e=>[e,e.toLowerCase()]));return e.includes(".")&&""!==i[0]&&i.unshift(""),{pathEnv:n,pathExt:i,pathExtExe:t}}return{pathEnv:n,pathExt:[""]}},h=(e,t)=>{const r=/^".*"$/.test(e)?e.slice(1,-1):e;return(!r&&d.test(t)?t.slice(0,2):"")+i(r,t)},y=async(e,t={})=>{const{pathEnv:r,pathExt:n,pathExtExe:i}=p(e,t),s=[];for(const a of r){const r=h(a,e);for(const e of n){const n=r+e;if(await o(n,{pathExt:i,ignoreErrors:!0})){if(!t.all)return n;s.push(n)}}}if(t.all&&s.length)return s;if(t.nothrow)return null;throw f(e)};e.exports=y,y.sync=(e,t={})=>{const{pathEnv:r,pathExt:o,pathExtExe:i}=p(e,t),s=[];for(const a of r){const r=h(a,e);for(const e of o){const o=r+e;if(n(o,{pathExt:i,ignoreErrors:!0})){if(!t.all)return o;s.push(o)}}}if(t.all&&s.length)return s;if(t.nothrow)return null;throw f(e)}},181:e=>{"use strict";e.exports=require("buffer")},4434:e=>{"use strict";e.exports=require("events")},9896:e=>{"use strict";e.exports=require("fs")},1943:e=>{"use strict";e.exports=require("fs/promises")},8611:e=>{"use strict";e.exports=require("http")},5692:e=>{"use strict";e.exports=require("https")},1708:e=>{"use strict";e.exports=require("node:process")},7830:e=>{"use strict";e.exports=require("node:stream/web")},6928:e=>{"use strict";e.exports=require("path")},9023:e=>{"use strict";e.exports=require("util")},8167:e=>{"use strict";e.exports=require("worker_threads")},3328:(e,t,r)=>{if(!globalThis.ReadableStream)try{const e=r(1708),{emitWarning:t}=e;try{e.emitWarning=()=>{},Object.assign(globalThis,r(7830)),e.emitWarning=t}catch(r){throw e.emitWarning=t,r}}catch(e){Object.assign(globalThis,r(5010))}try{const{Blob:e}=r(181);e&&!e.prototype.stream&&(e.prototype.stream=function(e){let t=0;const r=this;return new ReadableStream({type:"bytes",async pull(e){const o=r.slice(t,Math.min(r.size,t+65536)),n=await o.arrayBuffer();t+=n.byteLength,e.enqueue(new Uint8Array(n)),t===r.size&&e.close()}})})}catch(e){}},6262:function(e,t,r){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,n)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return n(t,e),t},s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.sync=t.isexe=t.posix=t.win32=void 0;const a=i(r(1481));t.posix=a;const l=i(r(3381));t.win32=l,s(r(136),t);const c="win32"===(process.env._ISEXE_TEST_PLATFORM_||process.platform)?l:a;t.isexe=c.isexe,t.sync=c.sync},136:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1481:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sync=t.isexe=void 0;const o=r(9896),n=r(1943);t.isexe=async(e,t={})=>{const{ignoreErrors:r=!1}=t;try{return i(await(0,n.stat)(e),t)}catch(e){const t=e;if(r||"EACCES"===t.code)return!1;throw t}},t.sync=(e,t={})=>{const{ignoreErrors:r=!1}=t;try{return i((0,o.statSync)(e),t)}catch(e){const t=e;if(r||"EACCES"===t.code)return!1;throw t}};const i=(e,t)=>e.isFile()&&s(e,t),s=(e,t)=>{const r=t.uid??process.getuid?.(),o=t.groups??process.getgroups?.()??[],n=t.gid??process.getgid?.()??o[0];if(void 0===r||void 0===n)throw new Error("cannot get uid or gid");const i=new Set([n,...o]),s=e.mode,a=e.uid,l=e.gid,c=parseInt("100",8),u=parseInt("010",8),d=c|u;return!!(s&parseInt("001",8)||s&u&&i.has(l)||s&c&&a===r||s&d&&0===r)}},3381:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sync=t.isexe=void 0;const o=r(9896),n=r(1943);t.isexe=async(e,t={})=>{const{ignoreErrors:r=!1}=t;try{return i(await(0,n.stat)(e),e,t)}catch(e){const t=e;if(r||"EACCES"===t.code)return!1;throw t}},t.sync=(e,t={})=>{const{ignoreErrors:r=!1}=t;try{return i((0,o.statSync)(e),e,t)}catch(e){const t=e;if(r||"EACCES"===t.code)return!1;throw t}};const i=(e,t,r)=>e.isFile()&&((e,t)=>{const{pathExt:r=process.env.PATHEXT||""}=t,o=r.split(";");if(-1!==o.indexOf(""))return!0;for(let t=0;t<o.length;t++){const r=o[t].toLowerCase(),n=e.substring(e.length-r.length).toLowerCase();if(r&&n===r)return!0}return!1})(t,r)},7288:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var o=r(3720);const n=class extends o.A{#e=0;#t="";constructor(e,t,r={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,r),null===r&&(r={});const o=void 0===r.lastModified?Date.now():Number(r.lastModified);Number.isNaN(o)||(this.#e=o),this.#t=String(t)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof o.A&&/^(File)$/.test(e[Symbol.toStringTag])}}},9730:(e,t,r)=>{"use strict";r.d(t,{YQ:()=>i.A,ZH:()=>n.A});const o=require("node:fs");require("node:path"),r(5157);var n=r(7288),i=r(3720);const{stat:s}=o.promises;Symbol.toStringTag},3720:(e,t,r)=>{"use strict";async function*o(e,t=!0){for(const r of e)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(t){let e=r.byteOffset;const t=r.byteOffset+r.byteLength;for(;e!==t;){const o=Math.min(t-e,65536),n=r.buffer.slice(e,e+o);e+=n.byteLength,yield new Uint8Array(n)}}else yield r;else{let e=0,t=r;for(;e!==t.size;){const r=t.slice(e,Math.min(t.size,e+65536)),o=await r.arrayBuffer();e+=o.byteLength,yield new Uint8Array(o)}}}r.d(t,{A:()=>i}),r(3328);const n=class e{#r=[];#o="";#n=0;#i="transparent";constructor(t=[],r={}){if("object"!=typeof t||null===t)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if("function"!=typeof t[Symbol.iterator])throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if("object"!=typeof r&&"function"!=typeof r)throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");null===r&&(r={});const o=new TextEncoder;for(const r of t){let t;t=ArrayBuffer.isView(r)?new Uint8Array(r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)):r instanceof ArrayBuffer?new Uint8Array(r.slice(0)):r instanceof e?r:o.encode(`${r}`),this.#n+=ArrayBuffer.isView(t)?t.byteLength:t.size,this.#r.push(t)}this.#i=`${void 0===r.endings?"transparent":r.endings}`;const n=void 0===r.type?"":String(r.type);this.#o=/^[\x20-\x7E]*$/.test(n)?n:""}get size(){return this.#n}get type(){return this.#o}async text(){const e=new TextDecoder;let t="";for await(const r of o(this.#r,!1))t+=e.decode(r,{stream:!0});return t+=e.decode(),t}async arrayBuffer(){const e=new Uint8Array(this.size);let t=0;for await(const r of o(this.#r,!1))e.set(r,t),t+=r.length;return e.buffer}stream(){const e=o(this.#r,!0);return new globalThis.ReadableStream({type:"bytes",async pull(t){const r=await e.next();r.done?t.close():t.enqueue(r.value)},async cancel(){await e.return()}})}slice(t=0,r=this.size,o=""){const{size:n}=this;let i=t<0?Math.max(n+t,0):Math.min(t,n),s=r<0?Math.max(n+r,0):Math.min(r,n);const a=Math.max(s-i,0),l=this.#r,c=[];let u=0;for(const e of l){if(u>=a)break;const t=ArrayBuffer.isView(e)?e.byteLength:e.size;if(i&&t<=i)i-=t,s-=t;else{let r;ArrayBuffer.isView(e)?(r=e.subarray(i,Math.min(t,s)),u+=r.byteLength):(r=e.slice(i,Math.min(t,s)),u+=r.size),s-=t,c.push(r),i=0}}const d=new e([],{type:String(o).toLowerCase()});return d.#n=a,d.#r=c,d}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&"object"==typeof e&&"function"==typeof e.constructor&&("function"==typeof e.stream||"function"==typeof e.arrayBuffer)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(n.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});const i=n},8435:(e,t,r)=>{"use strict";r.d(t,{$n:()=>h,fS:()=>p});var o=r(3720),n=r(7288),{toStringTag:i,iterator:s,hasInstance:a}=Symbol,l=Math.random,c="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),u=(e,t,r)=>(e+="",/^(Blob|File)$/.test(t&&t[i])?[(r=void 0!==r?r+"":"File"==t[i]?t.name:"blob",e),t.name!==r||"blob"==t[i]?new n.A([t],r,t):t]:[e,t+""]),d=(e,t)=>(t?e:e.replace(/\r?\n|\r/g,"\r\n")).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),f=(e,t,r)=>{if(t.length<r)throw new TypeError(`Failed to execute '${e}' on 'FormData': ${r} arguments required, but only ${t.length} present.`)};const p=class{#s=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[i](){return"FormData"}[s](){return this.entries()}static[a](e){return e&&"object"==typeof e&&"FormData"===e[i]&&!c.some((t=>"function"!=typeof e[t]))}append(...e){f("append",arguments,2),this.#s.push(u(...e))}delete(e){f("delete",arguments,1),e+="",this.#s=this.#s.filter((([t])=>t!==e))}get(e){f("get",arguments,1),e+="";for(var t=this.#s,r=t.length,o=0;o<r;o++)if(t[o][0]===e)return t[o][1];return null}getAll(e,t){return f("getAll",arguments,1),t=[],e+="",this.#s.forEach((r=>r[0]===e&&t.push(r[1]))),t}has(e){return f("has",arguments,1),e+="",this.#s.some((t=>t[0]===e))}forEach(e,t){for(var[r,o]of(f("forEach",arguments,1),this))e.call(t,o,r,this)}set(...e){f("set",arguments,2);var t=[],r=!0;e=u(...e),this.#s.forEach((o=>{o[0]===e[0]?r&&(r=!t.push(e)):t.push(o)})),r&&t.push(e),this.#s=t}*entries(){yield*this.#s}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}};function h(e,t=o.A){var r=`${l()}${l()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],i=`--${r}\r\nContent-Disposition: form-data; name="`;return e.forEach(((e,t)=>"string"==typeof e?n.push(i+d(t)+`"\r\n\r\n${e.replace(/\r(?!\n)|(?<!\r)\n/g,"\r\n")}\r\n`):n.push(i+d(t)+`"; filename="${d(e.name,1)}"\r\nContent-Type: ${e.type||"application/octet-stream"}\r\n\r\n`,e,"\r\n"))),n.push(`--${r}--`),new t(n,{type:"multipart/form-data; boundary="+r})}}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var i=r[e]={exports:{}};return t[e].call(i.exports,i,i.exports,o),i.exports}o.m=t,o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.f={},o.e=e=>Promise.all(Object.keys(o.f).reduce(((t,r)=>(o.f[r](e,t),t)),[])),o.u=e=>e+".extension.js",o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e={792:1},o.f.require=(t,r)=>{e[t]||(t=>{var r=t.modules,n=t.ids,i=t.runtime;for(var s in r)o.o(r,s)&&(o.m[s]=r[s]);i&&i(o);for(var a=0;a<n.length;a++)e[n[a]]=1})(require("./"+o.u(t)))};var n={};(()=>{"use strict";o.r(n),o.d(n,{activate:()=>it,deactivate:()=>st});var e={};o.r(e),o.d(e,{CopyURL:()=>j,CreateEnvironment:()=>g,Debug:()=>k,LogIn:()=>R,LogOut:()=>A,OpenDeploymentsLink:()=>P,OpenEnvironmentLink:()=>w,RefreshDeployments:()=>T,RefreshEnvironment:()=>_,RemoveEnvironment:()=>S,SetEnvironment:()=>E,VercelDeploy:()=>f,VercelDev:()=>p,VercelLink:()=>h});const t=require("vscode");let r=null;const i=(...e)=>r?e.map(String).forEach(r.appendLine):void 0;class s{constructor(...e){this.disposables=new Map,this.commands=new Map,this.getAll=()=>[...this.commands.values()],this.get=e=>e?this.commands.get(e):void 0,this.clear=()=>{for(const e of[this.commands,this.disposables]){for(const t of e.values())t.dispose();e.clear()}return this},this.remove=e=>{for(const t of[this.commands,this.disposables])t.get(e)?.dispose(),t.delete(e);return this},this.dispose=e=>void 0===e?this.clear():this.remove(e),this.normalizeCommand=e=>"function"==typeof e?new e(...this.commandArgs):e,this.register=e=>this.registerCommand(this.normalizeCommand(e)),this.registerAll=e=>((Array.isArray(e)?e:Object.values(e)).forEach(this.register),this),this.registerCommand=e=>{const{id:r,execute:o}=e;if(i(`Registering command ${r}`),!r)throw new Error("Command must have a non-empty id!");if(this.disposables.has(r))return this;const n=t.commands.registerCommand(r,o,e);return this.disposables.set(r,n),this.commands.set(r,e),this},this.commandArgs=e}}var a=o(7242),l=o.n(a);class c{constructor(e,r={}){if(this.kill=this.dispose,0===e.length)throw new TypeError("Command cannot be empty");var o;this.term=t.window.createTerminal({hideFromUser:!1,isTransient:!0,name:e[0],..."string"==typeof r?{name:r}:{...r},message:`> ${o=e,u?o.join(" "):o.map((e=>/^[A-Za-z0-9_/-]+$/.test(e)?e:`'${e.replace(/'/g,"'\\''")}'`.replace(/^(?:'')+/g,"").replace(/\\'''/g,"\\'"))).join(" ")}`,shellPath:e[0],shellArgs:e.slice(1)}),this.show()}show(...e){return this.term.show(...e),this}hide(...e){return this.term.hide(...e),this}dispose(...e){return this.term.dispose(...e),this}sendText(...e){return this.term.sendText(...e),this}get exitStatus(){return void 0!==this.term.exitStatus?Promise.resolve(this.term.exitStatus):new Promise(((e,r)=>{const o=t.window.onDidCloseTerminal((t=>{if(t===this.term)return o.dispose(),this.term.exitStatus?e(this.term.exitStatus):r("Exit status not available")}))}))}}const u="win32"===process.platform;async function d(e,r,o){r=Array.isArray(r)?r:[r];const n=await l()("vercel",{nothrow:!0});if(!n){const e="The vercel CLI is required for this feature.\nPlease install with npm install -g vercel";return void await t.window.showErrorMessage(e)}const i=[n,...r],s="Vercel "+r[0];return new c(i,{name:s,...o}).show(!0)}class f{constructor(e){this.vercel=e,this.id="vercel.deploy"}dispose(){}async execute(){return await d(this.vercel,"deploy")}}class p{constructor(e){this.vercel=e,this.id="vercel.dev"}dispose(){}async execute(){return await d(this.vercel,"dev")}}class h{constructor(e){this.vercel=e,this.id="vercel.vercelLink"}dispose(){}async execute(){return await d(this.vercel,"link")}}var y=o(9730);const m=["bitbucket","github","gitlab"],b=["production","preview","development"];class g{constructor(e){this.vercel=e,this.id="vercel.createEnvironment"}dispose(){}async execute(){if(!this.vercel.selectedProject)return;const e=(await this.vercel.env.getEnvList())?.map((e=>e.key));if(!e)throw new Error("Failed to get environment list");const r=await t.window.showInputBox({placeHolder:"Key for environment variable",validateInput:function(t){return t.match(/[^a-zA-Z\d_]/)?"Only letters, digits, and underscores are allowed.":t.match(/^[^a-zA-Z]/)?"The name should start with a letter.":e.includes(t)?`${t} already exists. Use set environment to change it's value`:null},title:"Creating Environment Variable"});if(!r)return;const o=await t.window.showInputBox({placeHolder:`Value for ${r}`,title:`Creating Environment Variable (${r})`,validateInput:e=>{const t=(o=e+r,new y.YQ([o]).size);var o;if(t>=65535)return`The combined key and value size of your Environment Variable (${t} bytes) exceeds the 65535 byte length limit. To set larger Environment Variables, please use the Vercel dashboard`}});if(void 0===o)return;const n=b.map((e=>({label:e,alwaysShow:!0,picked:!0}))),i=await t.window.showQuickPick(n,{canPickMany:!0,placeHolder:"Select environments to apply to (None or esc to cancel)",title:`Creating ${r}`});if(!i||0===i.length)return;const s=i.map((e=>e.label));await this.vercel.env.create(r,o,s)}}const v=async function(e,r){const o=await e.project.getInfo();if(!o)return;const n=await async function(e){const r=await e.teamId(),o=(await e.project.getInfo())?.accountId;if(r&&o===r){const e=t.workspace.getConfiguration("vercel").get("TeamDashboardURL");return"string"!=typeof e||0===e.length?void t.window.showErrorMessage("To open the team dashboard, please set the TeamDashboardURL setting."):t.Uri.parse(e)}const n=t.Uri.parse("https://vercel.com"),i=await e.user.getInfo();if(i)return t.Uri.joinPath(n,i.username);t.window.showErrorMessage("Could not get user info!")}(e);return n?t.Uri.joinPath(n,o.name,r):void 0};class w{constructor(e){this.vercel=e,this.id="vercel.openEnvironmentLink"}dispose(){}async execute(){const e=await v(this.vercel,"/settings/environment-variables");e&&await t.env.openExternal(e)}}class _{constructor(e){this.vercel=e,this.id="vercel.refreshEnvironment"}dispose(){}async execute(){this.vercel.onDidEnvironmentsUpdated()}}class S{constructor(e){this.vercel=e,this.id="vercel.removeEnvironment"}dispose(){}async execute(e){if(!this.vercel.selectedProject)return;let r=e?.envId,o=e?.key;if(!r){const e=(await this.vercel.env.getEnvList()).map((e=>({label:e.key,id:e.id}))),n=await t.window.showQuickPick(e,{placeHolder:"Pick one to delete or cancel with escape",title:"Delete Environment Variable",canPickMany:!1});n&&({label:o,id:r}=n)}if(!r)return;const n=await async function(e){const r=`Are you sure you want to delete the environment variable ${e}? This is not reversable.`;return"Yes"===await t.window.showQuickPick(["No","Yes"],{title:r,placeholder:r,canPickMany:!1})}(o);n&&await this.vercel.env.remove(r)}}class E{constructor(e){this.vercel=e,this.id="vercel.setEnvironment"}async getIdFromUser(e){const r=await t.window.showQuickPick(e.map((e=>e.key)).filter(Boolean),{placeHolder:"key",title:"Pick one to edit:"});if(r)return{key:r,id:e.find((e=>e.key===r))?.id}}dispose(){}async execute(e){if(!this.vercel.selectedProject)return;if(!await this.vercel.loggedIn())return;let r=e?.id,o=e?.key;const n=await this.vercel.env.getEnvList();if(r||({id:r,key:o}=await this.getIdFromUser(n)??{id:void 0,key:void 0}),!r||!o)return;const i=n.find((e=>e.id===r));if(!i)return void t.window.showErrorMessage("Could not find environment!");const s=i.value,a=e?.editing&&"VALUE"!==e.editing?s:await t.window.showInputBox({value:s,prompt:"Input the new value",title:`Editing ${o}`});if(void 0===a)return;const l="string"==typeof i.target?[i.target]:i.target??[];let c=l;if(!e?.editing||"TARGETS"===e.editing){const e=b.map((e=>({label:e,alwaysShow:!0,picked:l.includes(e)}))),r=await t.window.showQuickPick(e,{canPickMany:!0,placeHolder:"Select environments to apply to (esc to cancel)",title:`Editing ${o}`});if(!r)return;c=r?.map((e=>e.label))}0!==c.length&&await this.vercel.env.edit(r,a,c)}}class P{constructor(e){this.vercel=e,this.id="vercel.openDeploymentsLink"}dispose(){}async execute(){const e=await v(this.vercel,"/deployments");e&&await t.env.openExternal(e)}}class T{constructor(e){this.vercel=e,this.id="vercel.refreshDeployments"}dispose(){}async execute(){this.vercel.onDidDeploymentsUpdated()}}class j{constructor(){this.id="vercel.copyURL"}dispose(){}async execute({url:e}){await t.env.clipboard.writeText(e)}}class R{constructor(e){this.vercel=e,this.id="vercel.logIn"}dispose(){}async execute(){await async function(){const e=t.workspace.getConfiguration("vercel");e.get("AccessToken")&&(t.window.showWarningMessage("The vercel.AccessToken configuration has been removed. Auto-removing from configuration."),await e.update("AccessToken",void 0,t.ConfigurationTarget.Global))}(),await this.vercel.logIn(),await t.commands.executeCommand("workbench.view.extension.vercel-sidebar")}}class A{constructor(e){this.vercel=e,this.id="vercel.logOut"}dispose(){}async execute(){await this.vercel.logOut()}}var O=o(9023);class k{constructor(e){this.vercel=e,this.id="vercel.debug"}dispose(){}async execute(){const e=(0,O.inspect)(await this.vercel.debug()),o="-".repeat(20);if(r?.show(false),i(o,"DEBUG: ",e,o),"Copy"===await t.window.showInformationMessage("Debug information logged to output window","Copy"))return await t.env.clipboard.writeText(e)}}var C=o(5373),I=Object.defineProperty,x=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,D=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$=(e,t)=>{for(var r in t||(t={}))q.call(t,r)&&D(e,r,t[r]);if(x)for(var r of x(t))L.call(t,r)&&D(e,r,t[r]);return e};function M(e,t,r={},o={}){return"string"==typeof t?B(t,r,e,o):B(e,t,void 0,o)}function B(e,t,r,o){const{renderedPath:n,remainingParams:i}=function(e,t){const r=$({},t),o=e.replace(/:[_A-Za-z]+[_A-Za-z0-9]*/g,(e=>{const o=e.slice(1);return function(e,t){const r=["boolean","string","number"];if(!Object.prototype.hasOwnProperty.call(e,t))throw new Error(`Missing value for path parameter ${t}.`);if(!r.includes(typeof e[t]))throw new TypeError(`Path parameter ${t} cannot be of type ${typeof e[t]}. Allowed types are: ${r.join(", ")}.`);if("string"==typeof e[t]&&""===e[t].trim())throw new Error(`Path parameter ${t} cannot be an empty string.`)}(t,o),delete r[o],encodeURIComponent(t[o])}));return{renderedPath:o,remainingParams:r}}(e,t),s=function(e){return Object.keys(e).filter((t=>null!=e[t])).reduce(((t,r)=>(t[r]=e[r],t)),{})}(i),a=function(e,t){var r,o;if(Object.keys(e).length<1)return"";const n={format:null!=(o=null==(r=null==t?void 0:t.objectFormat)?void 0:r.format)?o:"RFC1738",arrayFormat:null==t?void 0:t.arrayFormat};return C.stringify(e,n)}(s,o),l=W(n,"?",a);return r?function(e,t,r){return e.length?W(t,"/",r):W(t,"?",r)}(n,r,l):l}function W(e,t,r){const o=e.endsWith(t)?e.slice(0,-t.length):e,n=r.startsWith(t)?r.slice(t.length):r;return""===o||""===n?o+n:o+t+n}class F{constructor(e,t,r,o,n,i,s){this.provider=e,this.sha=t,this.message=r,this.author=o,this.repo=n,this.org=i,this.branch=s,this.urlPatterns={bitbucket:"https://bitbucket.com/:org/:repo",github:"https://github.com/:org/:repo",gitlab:"https://gitlab.com/:org/:repo"},this.branchPatterns={bitbucket:"/branch/:branch",github:"/tree/:branch",gitlab:"/-/tree/:branch"},this.commitPatterns={bitbucket:"/commits/:sha",github:"/commit/:sha",gitlab:"/-/commit/:sha"}}get summary(){return this.message.split("\n",1)[0]||"(Empty Commit Message)"}get url(){return M(this.urlPatterns[this.provider]+this.commitPatterns[this.provider],{org:this.org,repo:this.repo,sha:this.sha})}get branchUrl(){return M(this.urlPatterns[this.provider]+this.branchPatterns[this.provider],{org:this.org,repo:this.repo,branch:this.branch})}get shortSha(){return this.sha.substring(0,7)}}class U extends t.TreeItem{constructor(e,r){const o=(n??(n={month:"numeric",day:"numeric",year:"2-digit",hour:"numeric",minute:"numeric"}),new Date(e.created).toLocaleDateString(void 0,n));var n;switch(super(`${e.target??"preview"}: ${[r?.branch,o].filter(Boolean).join(" - ")}`,t.TreeItemCollapsibleState.Collapsed),this.data=e,this.commit=r,this.tooltip=r?r.message:e.source?`Deployed by ${e.source}`:void 0,e.state){case"READY":this.iconPath=new t.ThemeIcon("symbol-event",new t.ThemeColor("charts.green"));break;case"ERROR":this.iconPath=new t.ThemeIcon("circle-filled",new t.ThemeColor("charts.red"));break;case"CANCELED":this.iconPath=new t.ThemeIcon("circle-filled",new t.ThemeColor("charts.gray"));break;case"INITIALIZING":case"BUILDING":this.iconPath=new t.ThemeIcon("circle-filled",new t.ThemeColor("charts.yellow"));break;case"QUEUED":this.iconPath=new t.ThemeIcon("circle-outline");break;case void 0:this.iconPath=void 0}}}class z extends t.TreeItem{constructor(e){super("Open URL"),this.iconPath=new t.ThemeIcon("link"),this.contextValue="deployment",this.tooltip=e,this.url="https://"+e,this.command={command:"vscode.open",title:"Open Deployed Site",arguments:[t.Uri.parse(this.url)]}}}class N extends t.TreeItem{constructor(e,r){super("View Logs"),this.iconPath=new t.ThemeIcon("pulse"),this.contextValue="deploymentLog",this.description=r.toLowerCase(),this.url="https://"+e+"/_logs#L1",this.command={command:"vscode.open",title:"Open Vercel Logs",arguments:[t.Uri.parse(this.url)]}}}class V extends t.TreeItem{constructor(e){super(e.branch),this.iconPath=new t.ThemeIcon("git-branch"),this.contextValue="deployment",this.description=`${e.org}/${e.repo}`,this.url=e.branchUrl,this.command={command:"vscode.open",title:"Open Git Branch",arguments:[t.Uri.parse(e.branchUrl)]}}}class H extends t.TreeItem{constructor(e){super(e.message),this.iconPath=new t.ThemeIcon("git-commit"),this.contextValue="deployment",this.description=e.author,this.url=e.url,this.command={command:"vscode.open",title:"Open Git Commit",arguments:[t.Uri.parse(e.url)]}}}class K{refresh(){this._onDidChangeTreeData.fire(void 0)}constructor(e){this.vercel=e,this._onDidChangeTreeData=new t.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.vercel.onDidDeploymentsUpdated=()=>this.refresh()}getTreeItem(e){return e}async getChildren(e){if(!e)return(await this.vercel.deployments.getAll()).map((e=>{const t="git"===e.source?function(e){const t=e&&function(e){const t=Object.keys(e)[0];return void 0===t?null:m.find((e=>t.startsWith(e)))??null}(e);if(t)return new F(t,e[`${t}CommitSha`],e[`${t}CommitMessage`],e[`${t}CommitAuthorName`],e[`${t}Repo`],e[`${t}Org`],e[`${t}CommitRef`])}(e.meta):void 0;return new U(e,t)}));const t=[new z(e.data.url),new N(e.data.url,e.data.state)];return e.commit&&t.push(new V(e.commit),new H(e.commit)),t}}class G extends t.TreeItem{constructor(e){super(e.key,t.TreeItemCollapsibleState.Collapsed),this.data=e,this.contextValue="Environment",this.iconPath=new t.ThemeIcon("key"),this.tooltip=e.key,this.envId=e.id,this.key=e.key}}class Q extends t.TreeItem{constructor(e){const{target:r,id:o,key:n}=e.data,i=Array.isArray(r)?r.join(", "):r;super(i),this.iconPath=new t.ThemeIcon("location"),this.tooltip=i,this.key=n,this.envId=o,this.command={command:"vercel.setEnvironment",title:"Set An Environment Variable",arguments:[{id:this.envId,key:this.key,editing:"TARGETS"}]}}}class Y extends t.TreeItem{constructor(e){const{value:r,id:o,key:n}=e.data;super(r),this.iconPath=new t.ThemeIcon("gear"),this.tooltip=r,this.envId=o,this.key=n,this.command={command:"vercel.setEnvironment",title:"Set An Environment Variable",arguments:[{id:this.envId,key:this.key,editing:"VALUE"}]}}}class J extends t.TreeItem{constructor(){const e="Click to add an environment variable";super(e),this.iconPath=new t.ThemeIcon("plus"),this.tooltip=e,this.command={command:"vercel.createEnvironment",title:"Add An Environment Variable",arguments:[]}}}class Z{refresh(){this._onDidChangeTreeData.fire(void 0)}constructor(e){this.vercel=e,this._onDidChangeTreeData=new t.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.vercel.onDidEnvironmentsUpdated=()=>this.refresh()}getTreeItem(e){return e}async getChildren(e){if(e)return[new Y(e),new Q(e)];if(!this.vercel.selectedProject||!await this.vercel.loggedIn())return[];const t=[new J],r=await this.vercel.env.getAll();return r.length>0&&r.forEach((e=>{t.push(new G(e))})),t}}var X=["second","minute","hour","day","week","month","year"],ee=["","","","","","",""],te={},re=function(e,t){te[e]=t},oe=[60,60,24,7,365/7/12,12];function ne(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}re("en_US",(function(e,t){if(0===t)return["just now","right now"];var r=X[Math.floor(t/2)];return e>1&&(r+="s"),[e+" "+r+" ago","in "+e+" "+r]})),re("zh_CN",(function(e,t){if(0===t)return["",""];var r=ee[~~(t/2)];return[e+" "+r+"",e+" "+r+""]}));class ie{set text(e){this.statusIcon.text=`${this.icon} ${e}`}set tooltip(e){this.statusIcon.tooltip=e}dispose(){clearInterval(this.interval),this.statusIcon.dispose()}constructor(e){this.vercel=e,this.statusIcon=t.window.createStatusBarItem(t.StatusBarAlignment.Right,100),this.icon="$(debug-breakpoint-function-unverified)";const r=()=>this.updateStatus().catch((e=>((...e)=>e.forEach((e=>i(`Error: ${String(e)}`))))("updating status bar:",e)));this.text="Loading",this.tooltip="Loading Vercel deployment status...",this.statusIcon.command="workbench.view.extension.vercel-sidebar",r(),this.statusIcon.show(),this.interval=setInterval(r,1e4)}contents(e,t){this.text=e,this.tooltip=t}async updateStatus(){if(!await this.vercel.loggedIn())return this.contents("Login","Click to login");if(!this.vercel.selectedProject)return this.contents("Link Vercel","Click to link to Vercel");const e=await this.vercel.getDeploymentsList();if(0===e.length)return this.contents("Not found","No deployments were found");const{state:t,name:r,createdAt:o,source:n}=e[0],i=o?function(e,t){for(var r=e<0?1:0,o=e=Math.abs(e),n=0;e>=oe[n]&&n<oe.length;n++)e/=oe[n];return(e=Math.floor(e))>(0==(n*=2)?9:1)&&(n+=1),t(e,n,o)[r].replace("%s",e.toString())}(function(e,t){return(+(t?ne(t):new Date)-+ne(e))/1e3}(new Date(o),c&&c.relativeDate),function(e){return te[e]||te.en_US}(l)):"a while",s=(t??"unknown").toLowerCase(),a=`${r??"unknown repo"} (${s}) ${i} via ${n??"unknown source"}`;var l,c,u;return this.contents((u=s).charAt(0).toUpperCase().concat(u.slice(1).toLowerCase()),a)}}var se=o(6928),ae=o.n(se);class le{onDidLogOut(){this.fileWatcher?.dispose(),this.folderWatcher?.dispose(),this.fileWatcher=null,this.folderWatcher=null}async onDidLogIn(){const e=t.workspace.workspaceFolders?.[0];if(!e)return;this.fileWatcher?.dispose(),this.folderWatcher?.dispose(),this.fileWatcher=t.workspace.createFileSystemWatcher(new t.RelativePattern(e,".vercel/project.json"),!1,!1,!1),this.folderWatcher=t.workspace.createFileSystemWatcher(new t.RelativePattern(e,".vercel/"),!0,!0,!1);const r=async e=>await this.setProject(await this.getProjectIdFromJson(e)),o=async e=>await this.setProject(void 0);this.fileWatcher.onDidChange(r),this.fileWatcher.onDidCreate(r),this.fileWatcher.onDidDelete(o),this.folderWatcher.onDidDelete(o),await r(),this.onProjectStateChanged()}constructor({globalState:e,secrets:r}){this.authKey="vercel_token",this.teamIdKey="vercel_team_id",this.projectKey="vercel_selected_project",this.fileWatcher=null,this.folderWatcher=null,this.onAuthStateChanged=e=>t.commands.executeCommand("setContext","vercelLoggedIn",e),this.onProjectStateChanged=e=>e,this.getProjectIdFromJson=async e=>{let r=e;if(!r){const e=t.workspace.workspaceFolders?.[0];if(!e)return;const o=e.uri.path,n=ae().posix.join(o,".vercel","project.json");r=t.Uri.file(n)}const o=await t.workspace.fs.readFile(r).then((e=>e),(()=>null));if(!o)return;const n=function(e){let t;try{t=JSON.parse(e)}catch(e){return}if(t&&"object"==typeof t)return t}(Buffer.from(o).toString("utf8"));return"string"==typeof n?.projectId?n.projectId:void 0},this.globalState=e,this.secrets=r,this.getAuth().then((e=>{this.onAuthStateChanged(!!e),this.onDidLogIn().catch((e=>t.window.showErrorMessage(`error while running DidLogIn handler: ${String(e)}`)))}))}async setAuth(e){const{accessToken:t,teamId:r}=e??{};t?await this.secrets.store(this.authKey,t):await this.secrets.delete(this.authKey),r?await this.secrets.store(this.teamIdKey,r):await this.secrets.delete(this.teamIdKey),await this.onAuthStateChanged(!!e)}async getAuth(){const e=await this.secrets.get(this.authKey);if(e)return{accessToken:e,teamId:await this.secrets.get(this.teamIdKey)??null}}async setProject(e){return e!==this.getProject()&&(await this.globalState.update(this.projectKey,e),this.onProjectStateChanged(e)),await t.commands.executeCommand("setContext","vercelLinked",!!e),e}getProject(){return this.globalState.get(this.projectKey)}}const ce=require("node:http"),ue=require("node:https"),de=require("node:zlib"),fe=require("node:stream"),pe=require("node:buffer"),he=require("node:util");var ye=o(3720),me=o(8435);class be extends Error{constructor(e,t){super(e),Error.captureStackTrace(this,this.constructor),this.type=t}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class ge extends be{constructor(e,t,r){super(e,t),r&&(this.code=this.errno=r.code,this.erroredSysCall=r.syscall)}}const ve=Symbol.toStringTag,we=e=>"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&"function"==typeof e.sort&&"URLSearchParams"===e[ve],_e=e=>e&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&/^(Blob|File)$/.test(e[ve]),Se=(0,he.promisify)(fe.pipeline),Ee=Symbol("Body internals");class Pe{constructor(e,{size:t=0}={}){let r=null;null===e?e=null:we(e)?e=pe.Buffer.from(e.toString()):_e(e)||pe.Buffer.isBuffer(e)||(he.types.isAnyArrayBuffer(e)?e=pe.Buffer.from(e):ArrayBuffer.isView(e)?e=pe.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof fe||(e instanceof me.fS?r=(e=(0,me.$n)(e)).type.split("=")[1]:e=pe.Buffer.from(String(e))));let o=e;pe.Buffer.isBuffer(e)?o=fe.Readable.from(e):_e(e)&&(o=fe.Readable.from(e.stream())),this[Ee]={body:e,stream:o,boundary:r,disturbed:!1,error:null},this.size=t,e instanceof fe&&e.on("error",(e=>{const t=e instanceof be?e:new ge(`Invalid response body while trying to fetch ${this.url}: ${e.message}`,"system",e);this[Ee].error=t}))}get body(){return this[Ee].stream}get bodyUsed(){return this[Ee].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:t,byteLength:r}=await Te(this);return e.slice(t,t+r)}async formData(){const e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){const e=new me.fS,t=new URLSearchParams(await this.text());for(const[r,o]of t)e.append(r,o);return e}const{toFormData:t}=await o.e(460).then(o.bind(o,7460));return t(this.body,e)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[Ee].body&&this[Ee].body.type||"",t=await this.arrayBuffer();return new ye.A([t],{type:e})}async json(){const e=await this.text();return JSON.parse(e)}async text(){const e=await Te(this);return(new TextDecoder).decode(e)}buffer(){return Te(this)}}async function Te(e){if(e[Ee].disturbed)throw new TypeError(`body used already for: ${e.url}`);if(e[Ee].disturbed=!0,e[Ee].error)throw e[Ee].error;const{body:t}=e;if(null===t)return pe.Buffer.alloc(0);if(!(t instanceof fe))return pe.Buffer.alloc(0);const r=[];let o=0;try{for await(const n of t){if(e.size>0&&o+n.length>e.size){const r=new ge(`content size at ${e.url} over limit: ${e.size}`,"max-size");throw t.destroy(r),r}o+=n.length,r.push(n)}}catch(t){throw t instanceof be?t:new ge(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t)}if(!0!==t.readableEnded&&!0!==t._readableState.ended)throw new ge(`Premature close of server response while trying to fetch ${e.url}`);try{return r.every((e=>"string"==typeof e))?pe.Buffer.from(r.join("")):pe.Buffer.concat(r,o)}catch(t){throw new ge(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t)}}Pe.prototype.buffer=(0,he.deprecate)(Pe.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer"),Object.defineProperties(Pe.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,he.deprecate)((()=>{}),"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});const je=(e,t)=>{let r,o,{body:n}=e[Ee];if(e.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof fe&&"function"!=typeof n.getBoundary&&(r=new fe.PassThrough({highWaterMark:t}),o=new fe.PassThrough({highWaterMark:t}),n.pipe(r),n.pipe(o),e[Ee].stream=r,n=o),n},Re=(0,he.deprecate)((e=>e.getBoundary()),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Ae=(e,t)=>null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":we(e)?"application/x-www-form-urlencoded;charset=UTF-8":_e(e)?e.type||null:pe.Buffer.isBuffer(e)||he.types.isAnyArrayBuffer(e)||ArrayBuffer.isView(e)?null:e instanceof me.fS?`multipart/form-data; boundary=${t[Ee].boundary}`:e&&"function"==typeof e.getBoundary?`multipart/form-data;boundary=${Re(e)}`:e instanceof fe?null:"text/plain;charset=UTF-8",Oe="function"==typeof ce.validateHeaderName?ce.validateHeaderName:e=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){const t=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},ke="function"==typeof ce.validateHeaderValue?ce.validateHeaderValue:(e,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){const t=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_CHAR"}),t}};class Ce extends URLSearchParams{constructor(e){let t=[];if(e instanceof Ce){const r=e.raw();for(const[e,o]of Object.entries(r))t.push(...o.map((t=>[e,t])))}else if(null==e);else{if("object"!=typeof e||he.types.isBoxedPrimitive(e))throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");{const r=e[Symbol.iterator];if(null==r)t.push(...Object.entries(e));else{if("function"!=typeof r)throw new TypeError("Header pairs must be iterable");t=[...e].map((e=>{if("object"!=typeof e||he.types.isBoxedPrimitive(e))throw new TypeError("Each header pair must be an iterable object");return[...e]})).map((e=>{if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");return[...e]}))}}}return t=t.length>0?t.map((([e,t])=>(Oe(e),ke(e,String(t)),[String(e).toLowerCase(),String(t)]))):void 0,super(t),new Proxy(this,{get(e,t,r){switch(t){case"append":case"set":return(r,o)=>(Oe(r),ke(r,String(o)),URLSearchParams.prototype[t].call(e,String(r).toLowerCase(),String(o)));case"delete":case"has":case"getAll":return r=>(Oe(r),URLSearchParams.prototype[t].call(e,String(r).toLowerCase()));case"keys":return()=>(e.sort(),new Set(URLSearchParams.prototype.keys.call(e)).keys());default:return Reflect.get(e,t,r)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const t=this.getAll(e);if(0===t.length)return null;let r=t.join(", ");return/^content-encoding$/i.test(e)&&(r=r.toLowerCase()),r}forEach(e,t=void 0){for(const r of this.keys())Reflect.apply(e,t,[this.get(r),r,this])}*values(){for(const e of this.keys())yield this.get(e)}*entries(){for(const e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce(((e,t)=>(e[t]=this.getAll(t),e)),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce(((e,t)=>{const r=this.getAll(t);return e[t]="host"===t?r[0]:r.length>1?r:r[0],e}),{})}}Object.defineProperties(Ce.prototype,["get","entries","forEach","values"].reduce(((e,t)=>(e[t]={enumerable:!0},e)),{}));const Ie=new Set([301,302,303,307,308]),xe=e=>Ie.has(e),qe=Symbol("Response internals");class Le extends Pe{constructor(e=null,t={}){super(e,t);const r=null!=t.status?t.status:200,o=new Ce(t.headers);if(null!==e&&!o.has("Content-Type")){const t=Ae(e,this);t&&o.append("Content-Type",t)}this[qe]={type:"default",url:t.url,status:r,statusText:t.statusText||"",headers:o,counter:t.counter,highWaterMark:t.highWaterMark}}get type(){return this[qe].type}get url(){return this[qe].url||""}get status(){return this[qe].status}get ok(){return this[qe].status>=200&&this[qe].status<300}get redirected(){return this[qe].counter>0}get statusText(){return this[qe].statusText}get headers(){return this[qe].headers}get highWaterMark(){return this[qe].highWaterMark}clone(){return new Le(je(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,t=302){if(!xe(t))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new Le(null,{headers:{location:new URL(e).toString()},status:t})}static error(){const e=new Le(null,{status:0,statusText:""});return e[qe].type="error",e}static json(e=void 0,t={}){const r=JSON.stringify(e);if(void 0===r)throw new TypeError("data is not JSON serializable");const o=new Ce(t&&t.headers);return o.has("content-type")||o.set("content-type","application/json"),new Le(r,{...t,headers:o})}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(Le.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});const De=require("node:url"),$e=require("node:net");function Me(e,t=!1){return null==e?"no-referrer":(e=new URL(e),/^(about|blob|data):$/.test(e.protocol)?"no-referrer":(e.username="",e.password="",e.hash="",t&&(e.pathname="",e.search=""),e))}const Be=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]);function We(e){return!!/^about:(blank|srcdoc)$/.test(e)||"data:"===e.protocol||!!/^(blob|filesystem):$/.test(e.protocol)||function(e){if(/^(http|ws)s:$/.test(e.protocol))return!0;const t=e.host.replace(/(^\[)|(]$)/g,""),r=(0,$e.isIP)(t);return!(4!==r||!/^127\./.test(t))||!(6!==r||!/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t))||"localhost"!==e.host&&!e.host.endsWith(".localhost")&&"file:"===e.protocol}(e)}const Fe=Symbol("Request internals"),Ue=e=>"object"==typeof e&&"object"==typeof e[Fe],ze=(0,he.deprecate)((()=>{}),".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)");class Ne extends Pe{constructor(e,t={}){let r;if(Ue(e)?r=new URL(e.url):(r=new URL(e),e={}),""!==r.username||""!==r.password)throw new TypeError(`${r} is an url with embedded credentials.`);let o=t.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(o)&&(o=o.toUpperCase()),!Ue(t)&&"data"in t&&ze(),(null!=t.body||Ue(e)&&null!==e.body)&&("GET"===o||"HEAD"===o))throw new TypeError("Request with GET/HEAD method cannot have body");const n=t.body?t.body:Ue(e)&&null!==e.body?je(e):null;super(n,{size:t.size||e.size||0});const i=new Ce(t.headers||e.headers||{});if(null!==n&&!i.has("Content-Type")){const e=Ae(n,this);e&&i.set("Content-Type",e)}let s=Ue(e)?e.signal:null;if("signal"in t&&(s=t.signal),null!=s&&("object"!=typeof(a=s)||"AbortSignal"!==a[ve]&&"EventTarget"!==a[ve]))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");var a;let l=null==t.referrer?e.referrer:t.referrer;if(""===l)l="no-referrer";else if(l){const e=new URL(l);l=/^about:(\/\/)?client$/.test(e)?"client":e}else l=void 0;this[Fe]={method:o,redirect:t.redirect||e.redirect||"follow",headers:i,parsedURL:r,signal:s,referrer:l},this.follow=void 0===t.follow?void 0===e.follow?20:e.follow:t.follow,this.compress=void 0===t.compress?void 0===e.compress||e.compress:t.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,this.highWaterMark=t.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=t.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=t.referrerPolicy||e.referrerPolicy||""}get method(){return this[Fe].method}get url(){return(0,De.format)(this[Fe].parsedURL)}get headers(){return this[Fe].headers}get redirect(){return this[Fe].redirect}get signal(){return this[Fe].signal}get referrer(){return"no-referrer"===this[Fe].referrer?"":"client"===this[Fe].referrer?"about:client":this[Fe].referrer?this[Fe].referrer.toString():void 0}get referrerPolicy(){return this[Fe].referrerPolicy}set referrerPolicy(e){this[Fe].referrerPolicy=function(e){if(!Be.has(e))throw new TypeError(`Invalid referrerPolicy: ${e}`);return e}(e)}clone(){return new Ne(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(Ne.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});class Ve extends be{constructor(e,t="aborted"){super(e,t)}}const He=new Set(["data:","http:","https:"]);async function Ke(e,t){return new Promise(((r,o)=>{const n=new Ne(e,t),{parsedURL:i,options:s}=(e=>{const{parsedURL:t}=e[Fe],r=new Ce(e[Fe].headers);r.has("Accept")||r.set("Accept","*/*");let o=null;if(null===e.body&&/^(post|put)$/i.test(e.method)&&(o="0"),null!==e.body){const t=(e=>{const{body:t}=e[Ee];return null===t?0:_e(t)?t.size:pe.Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null})(e);"number"!=typeof t||Number.isNaN(t)||(o=String(t))}o&&r.set("Content-Length",o),""===e.referrerPolicy&&(e.referrerPolicy="strict-origin-when-cross-origin"),e.referrer&&"no-referrer"!==e.referrer?e[Fe].referrer=function(e,{referrerURLCallback:t,referrerOriginCallback:r}={}){if("no-referrer"===e.referrer||""===e.referrerPolicy)return null;const o=e.referrerPolicy;if("about:client"===e.referrer)return"no-referrer";const n=e.referrer;let i=Me(n),s=Me(n,!0);i.toString().length>4096&&(i=s),t&&(i=t(i)),r&&(s=r(s));const a=new URL(e.url);switch(o){case"no-referrer":return"no-referrer";case"origin":return s;case"unsafe-url":return i;case"strict-origin":return We(i)&&!We(a)?"no-referrer":s.toString();case"strict-origin-when-cross-origin":return i.origin===a.origin?i:We(i)&&!We(a)?"no-referrer":s;case"same-origin":return i.origin===a.origin?i:"no-referrer";case"origin-when-cross-origin":return i.origin===a.origin?i:s;case"no-referrer-when-downgrade":return We(i)&&!We(a)?"no-referrer":i;default:throw new TypeError(`Invalid referrerPolicy: ${o}`)}}(e):e[Fe].referrer="no-referrer",e[Fe].referrer instanceof URL&&r.set("Referer",e.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip, deflate, br");let{agent:n}=e;"function"==typeof n&&(n=n(t));const i=(e=>{if(e.search)return e.search;const t=e.href.length-1,r=e.hash||("#"===e.href[t]?"#":"");return"?"===e.href[t-r.length]?"?":""})(t);return{parsedURL:t,options:{path:t.pathname+i,method:e.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:e.insecureHTTPParser,agent:n}}})(n);if(!He.has(i.protocol))throw new TypeError(`node-fetch cannot load ${e}. URL scheme "${i.protocol.replace(/:$/,"")}" is not supported.`);if("data:"===i.protocol){const e=function(e){if(!/^data:/i.test(e))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');const t=(e=e.replace(/\r?\n/g,"")).indexOf(",");if(-1===t||t<=4)throw new TypeError("malformed data: URI");const r=e.substring(5,t).split(";");let o="",n=!1;const i=r[0]||"text/plain";let s=i;for(let e=1;e<r.length;e++)"base64"===r[e]?n=!0:r[e]&&(s+=`;${r[e]}`,0===r[e].indexOf("charset=")&&(o=r[e].substring(8)));r[0]||o.length||(s+=";charset=US-ASCII",o="US-ASCII");const a=n?"base64":"ascii",l=unescape(e.substring(t+1)),c=Buffer.from(l,a);return c.type=i,c.typeFull=s,c.charset=o,c}(n.url),t=new Le(e,{headers:{"Content-Type":e.typeFull}});return void r(t)}const a=("https:"===i.protocol?ue:ce).request,{signal:l}=n;let c=null;const u=()=>{const e=new Ve("The operation was aborted.");o(e),n.body&&n.body instanceof fe.Readable&&n.body.destroy(e),c&&c.body&&c.body.emit("error",e)};if(l&&l.aborted)return void u();const d=()=>{u(),p()},f=a(i.toString(),s);l&&l.addEventListener("abort",d);const p=()=>{f.abort(),l&&l.removeEventListener("abort",d)};f.on("error",(e=>{o(new ge(`request to ${n.url} failed, reason: ${e.message}`,"system",e)),p()})),function(e){const t=pe.Buffer.from("0\r\n\r\n");let r,o=!1,n=!1;e.on("response",(e=>{const{headers:t}=e;o="chunked"===t["transfer-encoding"]&&!t["content-length"]})),e.on("socket",(i=>{const s=()=>{if(o&&!n){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",(e=>{c&&c.body&&c.body.destroy(e)})(e)}},a=e=>{n=0===pe.Buffer.compare(e.slice(-5),t),!n&&r&&(n=0===pe.Buffer.compare(r.slice(-3),t.slice(0,3))&&0===pe.Buffer.compare(e.slice(-2),t.slice(3))),r=e};i.prependListener("close",s),i.on("data",a),e.on("close",(()=>{i.removeListener("close",s),i.removeListener("data",a)}))}))}(f),process.version<"v14"&&f.on("socket",(e=>{let t;e.prependListener("end",(()=>{t=e._eventsCount})),e.prependListener("close",(r=>{if(c&&t<e._eventsCount&&!r){const e=new Error("Premature close");e.code="ERR_STREAM_PREMATURE_CLOSE",c.body.emit("error",e)}}))})),f.on("response",(e=>{f.setTimeout(0);const i=function(e=[]){return new Ce(e.reduce(((e,t,r,o)=>(r%2==0&&e.push(o.slice(r,r+2)),e)),[]).filter((([e,t])=>{try{return Oe(e),ke(e,String(t)),!0}catch{return!1}})))}(e.rawHeaders);if(xe(e.statusCode)){const a=i.get("Location");let l=null;try{l=null===a?null:new URL(a,n.url)}catch{if("manual"!==n.redirect)return o(new ge(`uri requested responds with an invalid redirect URL: ${a}`,"invalid-redirect")),void p()}switch(n.redirect){case"error":return o(new ge(`uri requested responds with a redirect, redirect mode is set to error: ${n.url}`,"no-redirect")),void p();case"manual":break;case"follow":{if(null===l)break;if(n.counter>=n.follow)return o(new ge(`maximum redirect reached at: ${n.url}`,"max-redirect")),void p();const a={headers:new Ce(n.headers),follow:n.follow,counter:n.counter+1,agent:n.agent,compress:n.compress,method:n.method,body:je(n),signal:n.signal,size:n.size,referrer:n.referrer,referrerPolicy:n.referrerPolicy};if(!((e,t)=>{const r=new URL(t).hostname,o=new URL(e).hostname;return r===o||r.endsWith(`.${o}`)})(n.url,l)||(s=n.url,new URL(l).protocol!==new URL(s).protocol))for(const e of["authorization","www-authenticate","cookie","cookie2"])a.headers.delete(e);if(303!==e.statusCode&&n.body&&t.body instanceof fe.Readable)return o(new ge("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void p();303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==n.method)||(a.method="GET",a.body=void 0,a.headers.delete("content-length"));const c=function(e){const t=(e.get("referrer-policy")||"").split(/[,\s]+/);let r="";for(const e of t)e&&Be.has(e)&&(r=e);return r}(i);return c&&(a.referrerPolicy=c),r(Ke(new Ne(l,a))),void p()}default:return o(new TypeError(`Redirect option '${n.redirect}' is not a valid value of RequestRedirect`))}}var s;l&&e.once("end",(()=>{l.removeEventListener("abort",d)}));let a=(0,fe.pipeline)(e,new fe.PassThrough,(e=>{e&&o(e)}));process.version<"v12.10"&&e.on("aborted",d);const u={url:n.url,status:e.statusCode,statusText:e.statusMessage,headers:i,size:n.size,counter:n.counter,highWaterMark:n.highWaterMark},h=i.get("Content-Encoding");if(!n.compress||"HEAD"===n.method||null===h||204===e.statusCode||304===e.statusCode)return c=new Le(a,u),void r(c);const y={flush:de.Z_SYNC_FLUSH,finishFlush:de.Z_SYNC_FLUSH};if("gzip"===h||"x-gzip"===h)return a=(0,fe.pipeline)(a,de.createGunzip(y),(e=>{e&&o(e)})),c=new Le(a,u),void r(c);if("deflate"===h||"x-deflate"===h){const t=(0,fe.pipeline)(e,new fe.PassThrough,(e=>{e&&o(e)}));return t.once("data",(e=>{a=8==(15&e[0])?(0,fe.pipeline)(a,de.createInflate(),(e=>{e&&o(e)})):(0,fe.pipeline)(a,de.createInflateRaw(),(e=>{e&&o(e)})),c=new Le(a,u),r(c)})),void t.once("end",(()=>{c||(c=new Le(a,u),r(c))}))}if("br"===h)return a=(0,fe.pipeline)(a,de.createBrotliDecompress(),(e=>{e&&o(e)})),c=new Le(a,u),void r(c);c=new Le(a,u),r(c)})),(async(e,{body:t})=>{null===t?e.end():await Se(t,e)})(f,n).catch(o)}))}var Ge=o(1146);function Qe(e,r=!1){const o=`${r?"Vercel Server Error":"Error"}(${e.error?.code}): ${e.error?.message??"Unknown"}`;return i(o),t.window.showErrorMessage(o),{...e,ok:!1}}class Ye{constructor(e){this.token=e,this.baseUrl="https://api.vercel.com",this.deployments=this.init({path:"/v6/deployments",fetch:{method:"GET"}}),this.projectInfo=this.init({path:"/v9/projects/:projectId",fetch:{method:"GET"}}),this.userInfo=this.init({path:"/v2/user",fetch:{method:"GET"}}),this.environment={getAll:this.init({path:"/v8/projects/:projectId/env",params:{decrypt:"true"},fetch:{method:"GET"}}),remove:this.init({path:"/v9/projects/:projectId/env/:id",fetch:{method:"DELETE"}}),create:this.init({hook:e=>({req:{...e.req,body:JSON.stringify(e.params.body)},params:{...e.params,body:void 0}}),path:"/v10/projects/:projectId/env",fetch:{method:"POST"}}),edit:this.init({hook:e=>({req:{...e.req,body:JSON.stringify(e.params.body)},params:{...e.params,body:void 0}}),path:"/v9/projects/:projectId/env/:id",fetch:{method:"PATCH"}})},this.deleteAccessToken=this.init({path:"/v3/user/tokens/:tokenId",fetch:{method:"DELETE"}}),this.oauth={accessToken:this.init({hook:e=>({req:{...e.req,body:new URLSearchParams(e.params.body)},params:{...e.params,body:void 0}}),path:"/v2/oauth/access_token",authorization:!1,fetch:{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}})}}mergeHeaders(e,t){if(!t)return{...e};const r={...e};for(const n of(0,Ge.objectKeys)(t)){const i=e[n],s=t[n];n in e?Array.isArray(i)?r[n]=i.concat(s):(o=i,r[n]=o&&"object"==typeof o?{...i,...s}:s):r[n]=s}var o;return r}async authHeader(e){return{headers:{Authorization:`Bearer ${e.accessToken}`}}}base(e,t){return M(this.baseUrl,e??"",t??{})}init(e){const t=e.params??{},r=e.fetch??{},o=e.authorization??!0,{path:n,hook:s}=e;return async(e,a)=>{e??(e={});const l={...t,...e};let c=this.mergeHeaders(r,a);if(o){const e=await this.token.getAuth();if(!e?.accessToken)return Qe({error:{code:"NOAUTH",message:"User is not authenticated."}});const t=await this.authHeader(e);c=this.mergeHeaders(c,t),e.teamId&&(l.teamId=e.teamId)}let u=l,d=c;if(s){const e=s({params:l,req:c});e&&(u=e.params,d=e.req)}const f=this.base(n,u);return await async function(e,t){let r,o;i(`API request to ${e.toString()}`),t&&i(`Options ${(0,O.inspect)(t)}`);try{r=await Ke(e,t)}catch(e){return Qe({error:{code:"FetchError",message:`A Network Error Occured: ${String(e)}`}})}try{o=await r.json()}catch(e){return Qe({error:{code:"InvalidResponse",message:`Failed to parse response json: ${e?.toString()}`}})}return o&&"object"==typeof o?(0,Ge.typeGuard)(o,"error"in o)?Qe(o,!0):(i(`Request successful: ${r.statusText} (${r.status})`),{...o,ok:!0}):Qe({error:{code:"InvalidResponse",message:`Returned data was not an object: ${String(o)}`}})}(f,d)}}}var Je=o(8611),Ze=o.n(Je),Xe=o(1194),et=o(4434);const tt="/oauth-complete",rt=`http://localhost:9615${tt}`;let ot;class nt{constructor(e){this.token=e,this.onDidEnvironmentsUpdated=()=>{},this.onDidLogOut=()=>{},this.onDidDeploymentsUpdated=()=>{},this.onDidProjectSelected=()=>{},this.projectInfo=null,this.userInfo=null,this.loggedIn=async()=>!!(await this.token.getAuth())?.accessToken,this.teamId=async()=>(await this.token.getAuth())?.teamId,this.project={getInfo:async(e=!1)=>{if(null!==this.projectInfo&&!e)return this.projectInfo;const r=this.selectedProject;if(!r)return void t.window.showErrorMessage("No project selected!");const o=await this.api.projectInfo({projectId:r},{});return o.ok?this.projectInfo=o:void 0}},this.user={getInfo:async(e=!1)=>{if(null!==this.userInfo&&!e)return this.userInfo;const t=await this.api.userInfo(void 0,void 0);return t.ok?this.userInfo=t.user:void 0}},this.envList=null,this.env={getAll:async()=>{if(!this.selectedProject)return[];const e=await this.api.environment.getAll({projectId:this.selectedProject},void 0);if(!e.ok)return this.envList=[];const t="envs"in e?e.envs??[]:[e];return this.envList=t},getEnvList:async(e=!1)=>e||!this.envList?await this.env.getAll():this.envList,create:async(e,r,o)=>{const n=this.selectedProject;n?(await this.api.environment.create({projectId:n,body:{key:e,value:r,target:o,type:"encrypted"}},void 0),this.onDidEnvironmentsUpdated()):t.window.showErrorMessage("No project selected!")},remove:async e=>{const r=this.selectedProject;r?(await this.api.environment.remove({projectId:r,id:e},void 0),this.onDidEnvironmentsUpdated()):t.window.showErrorMessage("No project selected!")},edit:async(e,r,o)=>{const n=this.selectedProject;n?(await this.api.environment.edit({projectId:n,id:e,body:{value:r,target:o}},void 0),this.onDidEnvironmentsUpdated()):t.window.showErrorMessage("No project selected!")}},this.deploymentsList=null,this.fetchingDeployments=null,this.deployments={getAll:async()=>{const e=this.selectedProject;if(!e)return[];if(this.fetchingDeployments)return await this.fetchingDeployments;const r=t.workspace.getConfiguration("vercel").get("DeploymentCount");this.fetchingDeployments=new Promise((async t=>{const o=await this.api.deployments({projectId:e,limit:r??20},void 0);return this.deploymentsList=o.ok&&o.deployments||[],t(this.deploymentsList)}));const o=await this.fetchingDeployments;return this.fetchingDeployments=null,o}},this.api=new Ye(e);const r=Number(t.workspace.getConfiguration("vercel").get("RefreshRate"));setInterval((()=>{this.onDidDeploymentsUpdated(),this.onDidEnvironmentsUpdated()}),60*(r??5)*1e3),e.onProjectStateChanged=e=>{this.onDidDeploymentsUpdated(),this.onDidEnvironmentsUpdated(),this.projectInfo=null,this.userInfo=null}}async debug(){const e=e=>e,t=t=>t.then(e,e);return{"Logged in":await t(this.loggedIn()),"Environment list":await t(this.env.getEnvList(!0)),"Project information":await t(this.project.getInfo(!0)),"User vercel information":await t(this.user.getInfo(!0)),"Selected project id":this.selectedProject,Authentication:await t(this.token.getAuth())}}async logIn(){const e=await async function(e){const r=await fetch("https://vercel.com").catch((()=>null));if(!r?.ok){const e="Failed to authenticate with Vercel (Network error).";return void t.window.showErrorMessage(e)}const o=await async function(e,r){let o,n;ot&&(i("Closing existing oauth server"),ot.close(),await(0,et.once)(ot,"close")),ot=Ze().createServer(),await(0,Xe.KT)(ot,9615,"127.0.0.1");const s=new Promise(((e,t)=>(o=e,n=t)));try{ot.once("request",(function(e,t){t.setHeader("connection","close");const n=new URL(e.url??"/",`http://${e.headers.host}`);if(n.pathname!==r)return t.writeHead(404),void t.end();o(n),t.writeHead(200,{"Content-Type":"text/html"}),t.end("<html><body>Authentication successful! You can now close this window.</body></html>")})),ot.once("error",(e=>n(e)));const e="https://vercel.com/integrations/vercel-project-manager/new";return t.window.showInformationMessage("Please sign in in your browser"),await t.env.openExternal(t.Uri.parse(e)),await s}finally{ot.close()}}(0,tt).catch((()=>null));if(!o){const e="Failed to authenticate with Vercel (Oauth failed).";return void t.window.showErrorMessage(e)}const n=o.searchParams.get("code");if(!n){const e="Failed to authenticate with Vercel (No code).";return void t.window.showErrorMessage(e)}const s=await async function(e,t){const r=await t.oauth.accessToken({body:{code:e,redirect_uri:rt,client_id:"oac_dJy0AdgVEITrkrnYF5Y4nSlo",client_secret:"NPBb5J2ZNrlhX3W98DCPS1o1"}},void 0);if(!r.ok)return;const{access_token:o,team_id:n}=r;return{accessToken:o,teamId:n}}(n,e);if(s?.accessToken)return s;{const e="Failed to authenticate with Vercel. (No access token)";t.window.showErrorMessage(e)}}(this.api);return!!e&&(await this.token.setAuth(e),this.onDidDeploymentsUpdated(),this.onDidEnvironmentsUpdated(),await this.token.onDidLogIn(),!0)}async logOut(){await this.api.deleteAccessToken({tokenId:"current"},void 0),await this.token.setAuth(void 0),await this.token.setProject(void 0),this.onDidLogOut(),this.token.onDidLogOut(),this.onDidDeploymentsUpdated(),this.onDidEnvironmentsUpdated()}get selectedProject(){return this.token.getProject()}async getDeploymentsList(){return await(this.deploymentsList??this.deployments.getAll())}}async function it(o){!function(e){r||(r=t.window.createOutputChannel("Vercel Project Manager"),e.subscriptions.push(r))}(o);const n=new le(o),i=new nt(n);t.window.createTreeView("vercel-deployments",{treeDataProvider:new K(i),showCollapseAll:!0}),t.window.createTreeView("vercel-environment",{treeDataProvider:new Z(i),showCollapseAll:!0}),o.subscriptions.push(new ie(i)),o.subscriptions.push(function(t){return new s(t).registerAll(e)}(i))}function st(){}})(),module.exports=n})();